Started GET "/" for 127.0.0.1 at 2021-10-31 11:22:33 +0530
  
ActiveRecord::NoDatabaseError (connection to server on socket "/tmp/.s.PGSQL.5432" failed: FATAL:  database "company_manager_development" does not exist
):
  
activerecord (6.1.4.1) lib/active_record/connection_adapters/postgresql_adapter.rb:81:in `rescue in new_client'
activerecord (6.1.4.1) lib/active_record/connection_adapters/postgresql_adapter.rb:77:in `new_client'
activerecord (6.1.4.1) lib/active_record/connection_adapters/postgresql_adapter.rb:37:in `postgresql_connection'
activerecord (6.1.4.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:882:in `public_send'
activerecord (6.1.4.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:882:in `new_connection'
activerecord (6.1.4.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:926:in `checkout_new_connection'
activerecord (6.1.4.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:905:in `try_to_checkout_new_connection'
activerecord (6.1.4.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:866:in `acquire_connection'
activerecord (6.1.4.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:588:in `checkout'
activerecord (6.1.4.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:428:in `connection'
activerecord (6.1.4.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:1128:in `retrieve_connection'
activerecord (6.1.4.1) lib/active_record/connection_handling.rb:327:in `retrieve_connection'
activerecord (6.1.4.1) lib/active_record/connection_handling.rb:283:in `connection'
activerecord (6.1.4.1) lib/active_record/migration.rb:611:in `connection'
activerecord (6.1.4.1) lib/active_record/migration.rb:606:in `build_watcher'
activerecord (6.1.4.1) lib/active_record/migration.rb:588:in `block in call'
activerecord (6.1.4.1) lib/active_record/migration.rb:587:in `synchronize'
activerecord (6.1.4.1) lib/active_record/migration.rb:587:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.4.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.4.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.4.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.4.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.4.1) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.4.1) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.4.1) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.4.1) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.4.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/host_authorization.rb:98:in `call'
rack-mini-profiler (2.3.3) lib/mini_profiler/profiler.rb:393:in `call'
webpacker (5.4.3) lib/webpacker/dev_server_proxy.rb:25:in `perform_request'
rack-proxy (0.7.0) lib/rack/proxy.rb:63:in `call'
railties (6.1.4.1) lib/rails/engine.rb:539:in `call'
puma (5.5.2) lib/puma/configuration.rb:249:in `call'
puma (5.5.2) lib/puma/request.rb:77:in `block in handle_request'
puma (5.5.2) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.5.2) lib/puma/request.rb:76:in `handle_request'
puma (5.5.2) lib/puma/server.rb:447:in `process_client'
puma (5.5.2) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  [1m[35m (181.2ms)[0m  [1m[35mCREATE DATABASE "company_manager_development" ENCODING = 'unicode'[0m
  [1m[35m (87.5ms)[0m  [1m[35mCREATE DATABASE "company_manager_test" ENCODING = 'unicode'[0m
Started GET "/" for 127.0.0.1 at 2021-10-31 11:22:50 +0530
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/mishaelajay/.rvm/gems/ruby-2.6.3/gems/railties-6.1.4.1/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/mishaelajay/.rvm/gems/ruby-2.6.3/gems/railties-6.1.4.1/lib/rails/templates/rails/welcome/index.html.erb (Duration: 13.1ms | Allocations: 355)
Completed 200 OK in 39ms (Views: 17.8ms | ActiveRecord: 0.0ms | Allocations: 3219)


  [1m[35m (34.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (8.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5474093982214418400)[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateCompanies (20211031060236)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.5ms)[0m  [1m[35mCREATE TABLE "companies" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "parent_id" integer, "lft" integer, "rgt" integer, "depth" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (2.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211031060236"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateEmployees (20211031060434)
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE "employees" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211031060434"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-10-31 06:10:53.952938"], ["updated_at", "2021-10-31 06:10:53.952938"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(5474093982214418400)[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5474093982214418400)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.9ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(5474093982214418400)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Load (7.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Create (9.0ms)[0m  [1m[32mINSERT INTO "companies" ("name", "lft", "rgt", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Acme"], ["lft", 1], ["rgt", 2], ["created_at", "2021-10-31 06:16:14.801604"], ["updated_at", "2021-10-31 06:16:14.801604"]]
  [1m[36mCompany Update All (3.2ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 0 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 'e24f14b0-0735-4ab5-87ea-8dd5347ddea3' ORDER BY "companies"."lft" ASC)[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.5ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", "e24f14b0-0735-4ab5-87ea-8dd5347ddea3"], ["LIMIT", 1]]
  [1m[36mCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("name", "lft", "rgt", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Bacme"], ["lft", 3], ["rgt", 4], ["created_at", "2021-10-31 06:16:39.513290"], ["updated_at", "2021-10-31 06:16:39.513290"]]
  [1m[36mCompany Update All (0.6ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 0 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 'a4385dba-b74a-43d7-8b31-6636e4b6bed3' ORDER BY "companies"."lft" ASC)[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", "e24f14b0-0735-4ab5-87ea-8dd5347ddea3"], ["LIMIT", 1]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", "a4385dba-b74a-43d7-8b31-6636e4b6bed3"], ["LIMIT", 1]]
  [1m[36mCompany Update All (6.7ms)[0m  [1m[33mUPDATE "companies" SET "lft" = CASE WHEN "lft" BETWEEN 2 AND 2 THEN "lft" + 4 - 2 WHEN "lft" BETWEEN 3 AND 4 THEN "lft" + 2 - 3 ELSE "lft" END, "rgt" = CASE WHEN "rgt" BETWEEN 2 AND 2 THEN "rgt" + 4 - 2 WHEN "rgt" BETWEEN 3 AND 4 THEN "rgt" + 2 - 3 ELSE "rgt" END, "parent_id" = CASE WHEN "id" = 'a4385dba-b74a-43d7-8b31-6636e4b6bed3' THEN 'e24f14b0-0735-4ab5-87ea-8dd5347ddea3' ELSE "parent_id" END, updated_at = '2021-10-31 06:17:36.883418' WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE ("companies"."lft" BETWEEN 2 AND 4 OR "companies"."rgt" BETWEEN 2 AND 4) ORDER BY "companies"."lft" ASC)[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE DATABASE "company_manager_development" ENCODING = 'unicode'[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE DATABASE "company_manager_test" ENCODING = 'unicode'[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35mSQL (4.0ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (13.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies" CASCADE[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE "companies" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "parent_id" integer, "lft" integer, "rgt" integer, "depth" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "employees" CASCADE[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "employees" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "dfed489304d63785d4b730ff183ac56ffc12b600"], ["created_at", "2021-10-31 06:26:24.307440"], ["updated_at", "2021-10-31 06:26:24.307440"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35mSQL (2.6ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies" CASCADE[0m
  [1m[35m (22.5ms)[0m  [1m[35mCREATE TABLE "companies" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "parent_id" integer, "lft" integer, "rgt" integer, "depth" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "employees" CASCADE[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "employees" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20211031060434)[0m
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20211031060236);

[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.8ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-10-31 06:26:24.441528"], ["updated_at", "2021-10-31 06:26:24.441528"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.3ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = $1, "updated_at" = $2 WHERE "ar_internal_metadata"."key" = $3[0m  [["value", "test"], ["updated_at", "2021-10-31 06:26:24.448438"], ["key", "environment"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "dfed489304d63785d4b730ff183ac56ffc12b600"], ["created_at", "2021-10-31 06:26:24.452782"], ["updated_at", "2021-10-31 06:26:24.452782"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (56.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "company_manager_development"[0m
  [1m[35m (48.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "company_manager_test"[0m
  [1m[35m (198.7ms)[0m  [1m[35mCREATE DATABASE "company_manager_development" ENCODING = 'unicode'[0m
  [1m[35m (82.2ms)[0m  [1m[35mCREATE DATABASE "company_manager_test" ENCODING = 'unicode'[0m
  [1m[35m (7.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5474093982214418400)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateCompanies (20211031060236)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.6ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "parent_id" integer, "lft" integer, "rgt" integer, "depth" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211031060236"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateEmployees (20211031060434)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "employees" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211031060434"]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-10-31 06:26:51.381706"], ["updated_at", "2021-10-31 06:26:51.381706"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(5474093982214418400)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Create (0.6ms)[0m  [1m[32mINSERT INTO "companies" ("name", "lft", "rgt", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Acme"], ["lft", 1], ["rgt", 2], ["created_at", "2021-10-31 06:27:07.364606"], ["updated_at", "2021-10-31 06:27:07.364606"]]
  [1m[36mCompany Update All (0.6ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 0 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 1 ORDER BY "companies"."lft" ASC)[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("name", "lft", "rgt", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Bacme"], ["lft", 3], ["rgt", 4], ["created_at", "2021-10-31 06:27:16.589025"], ["updated_at", "2021-10-31 06:27:16.589025"]]
  [1m[36mCompany Update All (0.4ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 0 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 2 ORDER BY "companies"."lft" ASC)[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Update All (1.0ms)[0m  [1m[33mUPDATE "companies" SET "lft" = CASE WHEN "lft" BETWEEN 2 AND 2 THEN "lft" + 4 - 2 WHEN "lft" BETWEEN 3 AND 4 THEN "lft" + 2 - 3 ELSE "lft" END, "rgt" = CASE WHEN "rgt" BETWEEN 2 AND 2 THEN "rgt" + 4 - 2 WHEN "rgt" BETWEEN 3 AND 4 THEN "rgt" + 2 - 3 ELSE "rgt" END, "parent_id" = CASE WHEN "id" = 2 THEN 1 ELSE "parent_id" END, updated_at = '2021-10-31 06:27:23.432377' WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE ("companies"."lft" BETWEEN 2 AND 4 OR "companies"."rgt" BETWEEN 2 AND 4) ORDER BY "companies"."lft" ASC)[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.8ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (4.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "companies" WHERE "companies"."lft" <= 2 AND "companies"."rgt" >= 3 AND ("companies"."id" != 2)[0m
  [1m[36mCompany Update All (1.0ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 1 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 2 ORDER BY "companies"."lft" ASC)[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (1.1ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (8480.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "company_manager_development"[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (51.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "company_manager_development"[0m
  [1m[35m (46.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "company_manager_test"[0m
  [1m[35m (180.8ms)[0m  [1m[35mCREATE DATABASE "company_manager_development" ENCODING = 'unicode'[0m
  [1m[35m (92.3ms)[0m  [1m[35mCREATE DATABASE "company_manager_test" ENCODING = 'unicode'[0m
  [1m[35m (13.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (5.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5474093982214418400)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateCompanies (20211031060236)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "employee_count" integer, "state_iso" character varying, "country_iso" character varying, "city" character varying, "parent_id" integer, "lft" integer, "rgt" integer, "depth" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (4.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211031060236"]]
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateEmployees (20211031060434)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (12.2ms)[0m  [1m[35mCREATE TABLE "employees" ("id" bigserial primary key, "company_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_15ca1438d5"
FOREIGN KEY ("company_id")
  REFERENCES "companies" ("id")
)[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE INDEX "index_employees_on_company_id" ON "employees" ("company_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211031060434"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (4.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-10-31 07:47:41.912268"], ["updated_at", "2021-10-31 07:47:41.912268"]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(5474093982214418400)[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Load (3.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Create (0.7ms)[0m  [1m[32mINSERT INTO "companies" ("name", "employee_count", "lft", "rgt", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Acme"], ["employee_count", 0], ["lft", 1], ["rgt", 2], ["created_at", "2021-10-31 07:48:27.895173"], ["updated_at", "2021-10-31 07:48:27.895173"]]
  [1m[36mCompany Update All (1.3ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 0 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 1 ORDER BY "companies"."lft" ASC)[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT "companies".* FROM "companies" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mEmployee Create (9.3ms)[0m  [1m[32mINSERT INTO "employees" ("company_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["company_id", 1], ["created_at", "2021-10-31 07:52:57.249114"], ["updated_at", "2021-10-31 07:52:57.249114"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mEmployee Create (1.0ms)[0m  [1m[32mINSERT INTO "employees" ("company_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["company_id", 1], ["created_at", "2021-10-31 07:53:32.659893"], ["updated_at", "2021-10-31 07:53:32.659893"]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (2.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" IS NULL ORDER BY "companies"."lft" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" IS NULL ORDER BY "companies"."lft" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 1 AND "companies"."lft" < 2 /* loading for inspect */ ORDER BY "companies"."lft" ASC LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (1.0ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Create (0.8ms)[0m  [1m[32mINSERT INTO "companies" ("name", "lft", "rgt", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "new company"], ["lft", 3], ["rgt", 4], ["created_at", "2021-10-31 08:24:00.405634"], ["updated_at", "2021-10-31 08:24:00.405634"]]
  [1m[36mCompany Update All (1.2ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 0 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 2 ORDER BY "companies"."lft" ASC)[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" IS NULL ORDER BY "companies"."lft" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Update All (1.9ms)[0m  [1m[33mUPDATE "companies" SET "lft" = CASE WHEN "lft" BETWEEN 2 AND 2 THEN "lft" + 4 - 2 WHEN "lft" BETWEEN 3 AND 4 THEN "lft" + 2 - 3 ELSE "lft" END, "rgt" = CASE WHEN "rgt" BETWEEN 2 AND 2 THEN "rgt" + 4 - 2 WHEN "rgt" BETWEEN 3 AND 4 THEN "rgt" + 2 - 3 ELSE "rgt" END, "parent_id" = CASE WHEN "id" = 2 THEN 1 ELSE "parent_id" END, updated_at = '2021-10-31 08:24:49.462180' WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE ("companies"."lft" BETWEEN 2 AND 4 OR "companies"."rgt" BETWEEN 2 AND 4) ORDER BY "companies"."lft" ASC)[0m
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.9ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (2.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "companies" WHERE "companies"."lft" <= 2 AND "companies"."rgt" >= 3 AND ("companies"."id" != 2)[0m
  [1m[36mCompany Update All (0.5ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 1 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 2 ORDER BY "companies"."lft" ASC)[0m
  [1m[36mTRANSACTION (4.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.7ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" <= 2 AND "companies"."rgt" >= 3 AND "companies"."parent_id" IS NULL ORDER BY "companies"."lft" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" <= 2 AND "companies"."rgt" >= 3 AND "companies"."parent_id" IS NULL ORDER BY "companies"."lft" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 1 AND "companies"."lft" < 4 /* loading for inspect */ ORDER BY "companies"."lft" ASC LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 2 AND "companies"."lft" < 3 /* loading for inspect */ ORDER BY "companies"."lft" ASC LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.5ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Create (1.1ms)[0m  [1m[32mINSERT INTO "companies" ("name", "lft", "rgt", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Root company"], ["lft", 5], ["rgt", 6], ["created_at", "2021-10-31 08:31:53.563150"], ["updated_at", "2021-10-31 08:31:53.563150"]]
  [1m[36mCompany Update All (0.8ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 0 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 3 ORDER BY "companies"."lft" ASC)[0m
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Update (0.3ms)[0m  [1m[33mUPDATE "companies" SET "depth" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["depth", 0], ["updated_at", "2021-10-31 08:31:59.319328"], ["id", 3]]
  [1m[36mCompany Update All (0.4ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 0 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 3 ORDER BY "companies"."lft" ASC)[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" IS NULL /* loading for inspect */ ORDER BY "companies"."lft" ASC LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" IS NULL ORDER BY "companies"."lft" ASC[0m
  [1m[36mCompany Load (1.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE ("companies"."rgt" - "companies"."lft" = 1) /* loading for inspect */ ORDER BY "companies"."lft" ASC LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCompany Load (1.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE ("companies"."rgt" - "companies"."lft" = 1) /* loading for inspect */ ORDER BY "companies"."lft" ASC LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE ("companies"."rgt" - "companies"."lft" = 1) ORDER BY "companies"."lft" ASC[0m
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" IS NULL ORDER BY "companies"."lft" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 1 AND "companies"."lft" < 4 ORDER BY "companies"."lft" ASC[0m
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
  [1m[36mCompany Load (2.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" IS NULL ORDER BY "companies"."lft" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 1 AND "companies"."lft" < 4 ORDER BY "companies"."lft" ASC[0m
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" IS NULL /* loading for inspect */ ORDER BY "companies"."lft" ASC LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" /* loading for inspect */ ORDER BY "companies"."lft" ASC LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCompany Load (2.8ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
Started GET "/" for 127.0.0.1 at 2021-10-31 14:14:43 +0530
  [1m[35m (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/mishaelajay/.rvm/gems/ruby-2.6.3/gems/railties-6.1.4.1/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/mishaelajay/.rvm/gems/ruby-2.6.3/gems/railties-6.1.4.1/lib/rails/templates/rails/welcome/index.html.erb (Duration: 8.9ms | Allocations: 355)
Completed 200 OK in 33ms (Views: 12.5ms | ActiveRecord: 0.0ms | Allocations: 2624)


Started GET "/companies" for 127.0.0.1 at 2021-10-31 14:14:48 +0530
Processing by CompaniesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  [1m[36mCompany Load (14.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" IS NULL ORDER BY "companies"."lft" ASC[0m
  ↳ app/views/companies/index.html.erb:1
  Rendered companies/index.html.erb within layouts/application (Duration: 32.5ms | Allocations: 6961)
[Webpacker] Compiling...
[Webpacker] Compiled all packs in /Users/mishaelajay/company-manager/public/packs
[Webpacker] Hash: e2a8a876c5815bee1e21
Version: webpack 4.46.0
Time: 2087ms
Built at: 10/31/2021 2:14:53 PM
                                     Asset       Size       Chunks                         Chunk Names
    js/application-e421b4aa3f716bebdab1.js    125 KiB  application  [emitted] [immutable]  application
js/application-e421b4aa3f716bebdab1.js.map    139 KiB  application  [emitted] [dev]        application
                             manifest.json  364 bytes               [emitted]              
Entrypoint application = js/application-e421b4aa3f716bebdab1.js js/application-e421b4aa3f716bebdab1.js.map
[./app/javascript/channels sync recursive _channel\.js$] ./app/javascript/channels sync _channel\.js$ 160 bytes {application} [built]
[./app/javascript/channels/index.js] 211 bytes {application} [built]
[./app/javascript/packs/application.js] 492 bytes {application} [built]
[./node_modules/webpack/buildin/module.js] (webpack)/buildin/module.js 552 bytes {application} [built]
    + 3 hidden modules

  Rendered layout layouts/application.html.erb (Duration: 4953.5ms | Allocations: 20406)
Completed 200 OK in 4991ms (Views: 4939.4ms | ActiveRecord: 20.9ms | Allocations: 26083)


Started GET "/companies" for 127.0.0.1 at 2021-10-31 14:15:14 +0530
Processing by CompaniesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  [1m[36mCompany Load (1.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" IS NULL ORDER BY "companies"."lft" ASC[0m
  ↳ app/views/companies/index.html.erb:1
  Rendered companies/index.html.erb within layouts/application (Duration: 3.7ms | Allocations: 914)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 14.4ms | Allocations: 4537)
Completed 200 OK in 21ms (Views: 16.3ms | ActiveRecord: 1.4ms | Allocations: 5853)


Started GET "/companies/1" for 127.0.0.1 at 2021-10-31 14:15:22 +0530
  
AbstractController::ActionNotFound (The action 'show' could not be found for CompaniesController):
  
actionpack (6.1.4.1) lib/abstract_controller/base.rb:160:in `process'
actionview (6.1.4.1) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.4.1) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.4.1) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.4.1) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.4.1) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.4.1) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.4.1) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.4.1) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.4.1) lib/action_dispatch/routing/route_set.rb:842:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.1.4.1) lib/action_dispatch/http/permissions_policy.rb:22:in `call'
actionpack (6.1.4.1) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/cookies.rb:689:in `call'
activerecord (6.1.4.1) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.4.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.4.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.4.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.4.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.4.1) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.4.1) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.4.1) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.4.1) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.4.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/host_authorization.rb:98:in `call'
rack-mini-profiler (2.3.3) lib/mini_profiler/profiler.rb:393:in `call'
webpacker (5.4.3) lib/webpacker/dev_server_proxy.rb:25:in `perform_request'
rack-proxy (0.7.0) lib/rack/proxy.rb:63:in `call'
railties (6.1.4.1) lib/rails/engine.rb:539:in `call'
puma (5.5.2) lib/puma/configuration.rb:249:in `call'
puma (5.5.2) lib/puma/request.rb:77:in `block in handle_request'
puma (5.5.2) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.5.2) lib/puma/request.rb:76:in `handle_request'
puma (5.5.2) lib/puma/server.rb:447:in `process_client'
puma (5.5.2) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/companies" for 127.0.0.1 at 2021-10-31 14:15:24 +0530
Processing by CompaniesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  [1m[36mCompany Load (1.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" IS NULL ORDER BY "companies"."lft" ASC[0m
  ↳ app/views/companies/index.html.erb:1
  Rendered companies/index.html.erb within layouts/application (Duration: 3.8ms | Allocations: 882)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 8.9ms | Allocations: 4450)
Completed 200 OK in 42ms (Views: 8.5ms | ActiveRecord: 1.0ms | Allocations: 5188)


Started GET "/" for 127.0.0.1 at 2021-10-31 14:23:26 +0530
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/mishaelajay/.rvm/gems/ruby-2.6.3/gems/railties-6.1.4.1/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/mishaelajay/.rvm/gems/ruby-2.6.3/gems/railties-6.1.4.1/lib/rails/templates/rails/welcome/index.html.erb (Duration: 7.9ms | Allocations: 233)
Completed 200 OK in 13ms (Views: 9.6ms | Allocations: 934)


Started GET "/company/new" for 127.0.0.1 at 2021-10-31 14:23:31 +0530
  
ActionController::RoutingError (No route matches [GET] "/company/new"):
  
Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 14:23:38 +0530
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  Rendered companies/new.html.erb within layouts/application (Duration: 12.0ms | Allocations: 3254)
  Rendered layout layouts/application.html.erb (Duration: 12.3ms | Allocations: 3325)
Completed 500 Internal Server Error in 73ms (ActiveRecord: 15.6ms | Allocations: 16279)


  
ActionView::Template::Error (undefined method `simple_form_for' for #<ActionView::Base:0x007f856a238448>
Did you mean?  simple_format):
    1: <%= simple_form_for @company do |f| %>
    2:   <%= f.input :name %>
    3:   <%= f.input :parent %>
    4:   <%= f.input :country %>
  
app/views/companies/new.html.erb:1
Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 14:24:05 +0530
  [1m[35m (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  Rendered companies/new.html.erb within layouts/application (Duration: 136.3ms | Allocations: 27656)
  Rendered layout layouts/application.html.erb (Duration: 136.6ms | Allocations: 27731)
Completed 500 Internal Server Error in 192ms (ActiveRecord: 5.3ms | Allocations: 40601)


  
ActionView::Template::Error (undefined method `country' for #<Company:0x00007f8ba31a5e10>
Did you mean?  country_iso):
    1: <%= simple_form_for @company do |f| %>
    2:   <%= f.input :name %>
    3:   <%= f.input :parent %>
    4:   <%= f.input :country %>
    5:   <%= f.button :submit %>
    6: <% end %>s
  
app/views/companies/new.html.erb:4
app/views/companies/new.html.erb:1
Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 14:24:20 +0530
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  Rendered companies/new.html.erb within layouts/application (Duration: 55.6ms | Allocations: 43952)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 77.0ms | Allocations: 49074)
Completed 200 OK in 82ms (Views: 80.4ms | ActiveRecord: 0.0ms | Allocations: 50352)


Started POST "/companies" for 127.0.0.1 at 2021-10-31 14:24:45 +0530
Processing by CompaniesController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "company"=>{"name"=>"Acme", "parent"=>"bacme", "country_iso"=>"SJ"}, "commit"=>"Create Company"}
No template found for CompaniesController#create, rendering head :no_content
Completed 204 No Content in 6ms (ActiveRecord: 0.0ms | Allocations: 1540)


Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 14:25:36 +0530
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  Rendered companies/new.html.erb within layouts/application (Duration: 22.2ms | Allocations: 23055)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 29.4ms | Allocations: 26578)
Completed 200 OK in 34ms (Views: 32.2ms | ActiveRecord: 0.0ms | Allocations: 27718)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (6.9ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (7338.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "company_manager_development"[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (8095.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "company_manager_development"[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (5808.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "company_manager_development"[0m
  [1m[35m (46.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "company_manager_test"[0m
  [1m[35m (142.8ms)[0m  [1m[35mCREATE DATABASE "company_manager_development" ENCODING = 'unicode'[0m
  [1m[35m (72.3ms)[0m  [1m[35mCREATE DATABASE "company_manager_test" ENCODING = 'unicode'[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5474093982214418400)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateCompanies (20211031060236)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "employee_count" integer DEFAULT 0, "country" character varying, "parent_id" integer, "lft" integer, "rgt" integer, "depth" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211031060236"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateEmployees (20211031060434)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE TABLE "employees" ("id" bigserial primary key, "company_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_15ca1438d5"
FOREIGN KEY ("company_id")
  REFERENCES "companies" ("id")
)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_employees_on_company_id" ON "employees" ("company_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211031060434"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-10-31 08:56:43.296960"], ["updated_at", "2021-10-31 08:56:43.296960"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(5474093982214418400)[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 14:27:05 +0530
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  Rendered companies/new.html.erb within layouts/application (Duration: 107.0ms | Allocations: 53175)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 126.4ms | Allocations: 58286)
Completed 200 OK in 181ms (Views: 131.5ms | ActiveRecord: 4.6ms | Allocations: 70107)


Started POST "/companies" for 127.0.0.1 at 2021-10-31 14:27:12 +0530
Processing by CompaniesController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "company"=>{"name"=>"Acme", "parent"=>"bacme", "country"=>"AF"}, "commit"=>"Create Company"}
No template found for CompaniesController#create, rendering head :no_content
Completed 204 No Content in 3ms (ActiveRecord: 0.0ms | Allocations: 1543)


Started GET "/" for 127.0.0.1 at 2021-10-31 14:36:51 +0530
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/mishaelajay/.rvm/gems/ruby-2.6.3/gems/railties-6.1.4.1/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/mishaelajay/.rvm/gems/ruby-2.6.3/gems/railties-6.1.4.1/lib/rails/templates/rails/welcome/index.html.erb (Duration: 9.3ms | Allocations: 238)
Completed 200 OK in 14ms (Views: 10.6ms | Allocations: 995)


Started GET "/companies" for 127.0.0.1 at 2021-10-31 14:36:59 +0530
Processing by CompaniesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  [1m[36mCompany Load (5.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" IS NULL ORDER BY "companies"."lft" ASC[0m
  ↳ app/views/companies/index.html.erb:1
  Rendered companies/index.html.erb within layouts/application (Duration: 8.0ms | Allocations: 907)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 24.8ms | Allocations: 4493)
Completed 200 OK in 114ms (Views: 22.9ms | ActiveRecord: 24.0ms | Allocations: 12208)


Started GET "/companies" for 127.0.0.1 at 2021-10-31 14:37:18 +0530
Processing by CompaniesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  [1m[36mCompany Load (1.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" IS NULL ORDER BY "companies"."lft" ASC[0m
  ↳ app/views/companies/index.html.erb:1
  Rendered companies/index.html.erb within layouts/application (Duration: 28.3ms | Allocations: 718)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 40.1ms | Allocations: 4153)
Completed 200 OK in 43ms (Views: 39.6ms | ActiveRecord: 1.4ms | Allocations: 4728)


Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 14:37:23 +0530
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  Rendered companies/new.html.erb within layouts/application (Duration: 34.4ms | Allocations: 23107)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 40.4ms | Allocations: 26444)
Completed 200 OK in 49ms (Views: 40.9ms | ActiveRecord: 0.0ms | Allocations: 31452)


Started POST "/companies" for 127.0.0.1 at 2021-10-31 14:37:29 +0530
Processing by CompaniesController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "company"=>{"name"=>"Acme", "parent"=>"bacme", "country"=>"AF"}, "commit"=>"Create Company"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 666)


  
ActiveModel::ForbiddenAttributesError (ActiveModel::ForbiddenAttributesError):
  
app/controllers/companies_controller.rb:8:in `create'
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" IS NULL ORDER BY "companies"."lft" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Create (3.8ms)[0m  [1m[32mINSERT INTO "companies" ("name", "lft", "rgt", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Acme"], ["lft", 1], ["rgt", 2], ["created_at", "2021-10-31 09:09:01.774480"], ["updated_at", "2021-10-31 09:09:01.774480"]]
  [1m[36mCompany Update All (1.1ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 0 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 1 ORDER BY "companies"."lft" ASC)[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Load (2.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.5ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Create (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "lft", "rgt", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Bacme"], ["lft", 3], ["rgt", 4], ["created_at", "2021-10-31 09:09:29.724146"], ["updated_at", "2021-10-31 09:09:29.724146"]]
  [1m[36mCompany Update All (0.7ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 0 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 2 ORDER BY "companies"."lft" ASC)[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" IS NULL ORDER BY "companies"."lft" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" IS NULL ORDER BY "companies"."lft" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (2.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 1 AND "companies"."lft" < 2 AND ("companies"."id" != 1) /* loading for inspect */ ORDER BY "companies"."lft" ASC LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" IS NULL ORDER BY "companies"."lft" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" IS NULL /* loading for inspect */ ORDER BY "companies"."lft" ASC LIMIT $1[0m  [["LIMIT", 11]]
Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 14:46:38 +0530
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  Rendered companies/new.html.erb within layouts/application (Duration: 35.7ms | Allocations: 6841)
  Rendered layout layouts/application.html.erb (Duration: 37.0ms | Allocations: 6911)
Completed 500 Internal Server Error in 96ms (ActiveRecord: 0.0ms | Allocations: 8153)


  
ActionView::Template::Error (undefined method `parent_company_name' for #<Company:0x00007f9b4cb4d1f8>
Did you mean?  parent_column_name):
    1: <%= simple_form_for @company do |f| %>
    2:   <%= f.input :name %>
    3:   <%= f.input :parent_company_name %>
    4:   <%= f.input :country %>
    5:   <%= f.button :submit %>
    6: <% end %>
  
app/views/companies/new.html.erb:3
app/views/companies/new.html.erb:1
Started GET "/" for 127.0.0.1 at 2021-10-31 14:49:23 +0530
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/mishaelajay/.rvm/gems/ruby-2.6.3/gems/railties-6.1.4.1/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/mishaelajay/.rvm/gems/ruby-2.6.3/gems/railties-6.1.4.1/lib/rails/templates/rails/welcome/index.html.erb (Duration: 9.9ms | Allocations: 228)
Completed 200 OK in 73ms (Views: 70.9ms | Allocations: 933)


Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 14:49:29 +0530
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  Rendered companies/new.html.erb within layouts/application (Duration: 21.7ms | Allocations: 23150)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 40.8ms | Allocations: 26786)
Completed 200 OK in 86ms (Views: 45.3ms | ActiveRecord: 13.0ms | Allocations: 38760)


Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 14:49:31 +0530
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  Rendered companies/new.html.erb within layouts/application (Duration: 18.6ms | Allocations: 22038)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 24.2ms | Allocations: 25373)
Completed 200 OK in 26ms (Views: 25.0ms | ActiveRecord: 0.0ms | Allocations: 25774)


Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 14:50:46 +0530
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  Rendered companies/new.html.erb within layouts/application (Duration: 9.9ms | Allocations: 7513)
  Rendered layout layouts/application.html.erb (Duration: 10.2ms | Allocations: 7584)
Completed 500 Internal Server Error in 17ms (ActiveRecord: 0.0ms | Allocations: 8707)


  
ActionView::Template::Error (No input found for dropdown):
    1: <%= simple_form_for @company do |f| %>
    2:   <%= f.input :name %>
    3:   <%= f.input :parent,as: :dropdown, collection: @all_companies %>
    4:   <%= f.input :country %>
    5:   <%= f.button :submit %>
    6: <% end %>
  
app/views/companies/new.html.erb:3
app/views/companies/new.html.erb:1
Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 14:51:47 +0530
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  Rendered companies/new.html.erb within layouts/application (Duration: 35.4ms | Allocations: 26808)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 49.8ms | Allocations: 30332)
Completed 200 OK in 54ms (Views: 52.4ms | ActiveRecord: 0.0ms | Allocations: 31473)


Started GET "/" for 127.0.0.1 at 2021-10-31 14:56:09 +0530
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/mishaelajay/.rvm/gems/ruby-2.6.3/gems/railties-6.1.4.1/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/mishaelajay/.rvm/gems/ruby-2.6.3/gems/railties-6.1.4.1/lib/rails/templates/rails/welcome/index.html.erb (Duration: 8.0ms | Allocations: 228)
Completed 200 OK in 13ms (Views: 9.6ms | Allocations: 916)


Started GET "/companies" for 127.0.0.1 at 2021-10-31 14:56:13 +0530
Processing by CompaniesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  [1m[36mCompany Load (1.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" IS NULL ORDER BY "companies"."lft" ASC[0m
  ↳ app/views/companies/index.html.erb:1
  Rendered companies/index.html.erb within layouts/application (Duration: 11.7ms | Allocations: 5360)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 48.7ms | Allocations: 8944)
Completed 200 OK in 129ms (Views: 49.8ms | ActiveRecord: 21.4ms | Allocations: 16594)


Started GET "/companies/2" for 127.0.0.1 at 2021-10-31 14:56:15 +0530
Processing by CompaniesController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ (byebug):1:in `show'
  Rendering layout layouts/application.html.erb
  Rendering companies/show.html.erb within layouts/application
  Rendered companies/show.html.erb within layouts/application (Duration: 1.4ms | Allocations: 110)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 19.2ms | Allocations: 3484)
Completed 200 OK in 48641ms (Views: 28.8ms | ActiveRecord: 1.5ms | Allocations: 1034279)


  [1m[36mCompany Load (1.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 1 AND "companies"."lft" < 2 /* loading for inspect */ ORDER BY "companies"."lft" ASC LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (1.1ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Create (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "lft", "rgt", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Cacme"], ["lft", 5], ["rgt", 6], ["created_at", "2021-10-31 09:28:28.915630"], ["updated_at", "2021-10-31 09:28:28.915630"]]
  [1m[36mCompany Update All (3.7ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 0 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 3 ORDER BY "companies"."lft" ASC)[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.8ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Update All (1.0ms)[0m  [1m[33mUPDATE "companies" SET "lft" = CASE WHEN "lft" BETWEEN 2 AND 4 THEN "lft" + 6 - 4 WHEN "lft" BETWEEN 5 AND 6 THEN "lft" + 2 - 5 ELSE "lft" END, "rgt" = CASE WHEN "rgt" BETWEEN 2 AND 4 THEN "rgt" + 6 - 4 WHEN "rgt" BETWEEN 5 AND 6 THEN "rgt" + 2 - 5 ELSE "rgt" END, "parent_id" = CASE WHEN "id" = 3 THEN 1 ELSE "parent_id" END, updated_at = '2021-10-31 09:29:52.077688' WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE ("companies"."lft" BETWEEN 2 AND 6 OR "companies"."rgt" BETWEEN 2 AND 6) ORDER BY "companies"."lft" ASC)[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.6ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (4.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "companies" WHERE "companies"."lft" <= 2 AND "companies"."rgt" >= 3 AND ("companies"."id" != 3)[0m
  [1m[36mCompany Update All (0.6ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 1 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 3 ORDER BY "companies"."lft" ASC)[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.7ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 3], ["LIMIT", 1]]
Started GET "/companies/2" for 127.0.0.1 at 2021-10-31 15:04:52 +0530
Processing by CompaniesController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:19:in `show'
  [1m[36mCompany Load (1.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 5 AND "companies"."lft" < 6 ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:44:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/show.html.erb within layouts/application
  Rendered companies/show.html.erb within layouts/application (Duration: 0.7ms | Allocations: 35)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 14.7ms | Allocations: 3433)
Completed 200 OK in 60ms (Views: 16.3ms | ActiveRecord: 16.8ms | Allocations: 16533)


Started GET "/companies/2" for 127.0.0.1 at 2021-10-31 15:05:09 +0530
Processing by CompaniesController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mCompany Load (1.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:19:in `show'
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 5 AND "companies"."lft" < 6 ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:45:in `build_hash_tree'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Create (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "lft", "rgt", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Dacme"], ["lft", 7], ["rgt", 8], ["created_at", "2021-10-31 09:36:02.370670"], ["updated_at", "2021-10-31 09:36:02.370670"]]
  [1m[36mCompany Update All (0.8ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 0 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 4 ORDER BY "companies"."lft" ASC)[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" IS NULL ORDER BY "companies"."lft" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCompany Update All (0.6ms)[0m  [1m[33mUPDATE "companies" SET "lft" = CASE WHEN "lft" BETWEEN 4 AND 6 THEN "lft" + 8 - 6 WHEN "lft" BETWEEN 7 AND 8 THEN "lft" + 4 - 7 ELSE "lft" END, "rgt" = CASE WHEN "rgt" BETWEEN 4 AND 6 THEN "rgt" + 8 - 6 WHEN "rgt" BETWEEN 7 AND 8 THEN "rgt" + 4 - 7 ELSE "rgt" END, "parent_id" = CASE WHEN "id" = 4 THEN 1 ELSE "parent_id" END, updated_at = '2021-10-31 09:37:03.658055' WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE ("companies"."lft" BETWEEN 4 AND 8 OR "companies"."rgt" BETWEEN 4 AND 8) ORDER BY "companies"."lft" ASC)[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.7ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "companies" WHERE "companies"."lft" <= 4 AND "companies"."rgt" >= 5 AND ("companies"."id" != 4)[0m
  [1m[36mCompany Update All (0.3ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 1 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 4 ORDER BY "companies"."lft" ASC)[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.6ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 4], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering companies/show.html.erb within layouts/application
  Rendered companies/show.html.erb within layouts/application (Duration: 0.1ms | Allocations: 35)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 17.8ms | Allocations: 3410)
Completed 200 OK in 125910ms (Views: 20.0ms | ActiveRecord: 11.6ms | Allocations: 33545)


Started GET "/companies/2" for 127.0.0.1 at 2021-10-31 15:09:11 +0530
Processing by CompaniesController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mCompany Load (1.5ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:19:in `show'
  [1m[36mCompany Load (2.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 7 AND "companies"."lft" < 8 ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:45:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/show.html.erb within layouts/application
  Rendered companies/show.html.erb within layouts/application (Duration: 0.7ms | Allocations: 142)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 17.0ms | Allocations: 3700)
Completed 200 OK in 3562ms (Views: 21.6ms | ActiveRecord: 3.7ms | Allocations: 8502)


Started GET "/companies/2" for 127.0.0.1 at 2021-10-31 15:09:45 +0530
Processing by CompaniesController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:19:in `show'
  [1m[36mCompany Load (1.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 7 AND "companies"."lft" < 8 ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:44:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/show.html.erb within layouts/application
  Rendered companies/show.html.erb within layouts/application (Duration: 0.2ms | Allocations: 54)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 8.7ms | Allocations: 3450)
Completed 200 OK in 37ms (Views: 9.8ms | ActiveRecord: 8.6ms | Allocations: 13108)


Started GET "/companies/2" for 127.0.0.1 at 2021-10-31 15:09:46 +0530
Processing by CompaniesController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:19:in `show'
  [1m[36mCompany Load (1.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 7 AND "companies"."lft" < 8 ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:44:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/show.html.erb within layouts/application
  Rendered companies/show.html.erb within layouts/application (Duration: 0.1ms | Allocations: 52)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 5.9ms | Allocations: 3483)
Completed 200 OK in 12ms (Views: 6.4ms | ActiveRecord: 1.9ms | Allocations: 5282)


Started GET "/companies/1" for 127.0.0.1 at 2021-10-31 15:09:58 +0530
Processing by CompaniesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mCompany Load (1.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:19:in `show'
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 1 AND "companies"."lft" < 6 ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:44:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/show.html.erb within layouts/application
  Rendered companies/show.html.erb within layouts/application (Duration: 0.2ms | Allocations: 79)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 8.5ms | Allocations: 3511)
Completed 200 OK in 20ms (Views: 9.1ms | ActiveRecord: 2.0ms | Allocations: 5329)


Started GET "/companies/1" for 127.0.0.1 at 2021-10-31 15:10:05 +0530
Processing by CompaniesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mCompany Load (1.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:19:in `show'
  [1m[36mCompany Load (1.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 1 AND "companies"."lft" < 6 ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:44:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/show.html.erb within layouts/application
  Rendered companies/show.html.erb within layouts/application (Duration: 0.2ms | Allocations: 79)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 7.3ms | Allocations: 3512)
Completed 200 OK in 15ms (Views: 8.1ms | ActiveRecord: 2.4ms | Allocations: 5334)


Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 15:10:23 +0530
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  Rendered companies/new.html.erb within layouts/application (Duration: 37.8ms | Allocations: 24779)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 43.2ms | Allocations: 28114)
Completed 200 OK in 46ms (Views: 44.0ms | ActiveRecord: 0.0ms | Allocations: 28639)


Started GET "/companies/1" for 127.0.0.1 at 2021-10-31 15:10:25 +0530
Processing by CompaniesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mCompany Load (1.7ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:19:in `show'
  [1m[36mCompany Load (1.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 1 AND "companies"."lft" < 6 ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:44:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/show.html.erb within layouts/application
  Rendered companies/show.html.erb within layouts/application (Duration: 0.3ms | Allocations: 80)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 5.8ms | Allocations: 3512)
Completed 200 OK in 14ms (Views: 6.6ms | ActiveRecord: 2.7ms | Allocations: 5331)


Started GET "/companies" for 127.0.0.1 at 2021-10-31 15:19:24 +0530
Processing by CompaniesController#index as HTML
Completed 500 Internal Server Error in 1ms (Allocations: 905)


  
NoMethodError (undefined method `all' for nil:NilClass):
  
app/controllers/companies_controller.rb:14:in `index'
Started GET "/companies" for 127.0.0.1 at 2021-10-31 15:20:26 +0530
Processing by CompaniesController#index as HTML
Completed 500 Internal Server Error in 1ms (Allocations: 939)


  
NoMethodError (undefined method `all' for nil:NilClass):
  
app/controllers/companies_controller.rb:14:in `index'
Started GET "/companies" for 127.0.0.1 at 2021-10-31 15:20:45 +0530
Processing by CompaniesController#index as HTML
Completed 500 Internal Server Error in 7ms (Allocations: 2586)


  
NameError (undefined local variable or method `company' for #<CompaniesController:0x007f9b4cc0c508>
Did you mean?  company_url):
  
app/controllers/companies_controller.rb:14:in `index'
Started GET "/companies" for 127.0.0.1 at 2021-10-31 15:20:53 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (2.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
  ↳ app/controllers/companies_controller.rb:43:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 0.7ms | Allocations: 169)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 18.0ms | Allocations: 3753)
Completed 200 OK in 151ms (Views: 22.4ms | ActiveRecord: 21.3ms | Allocations: 16359)


Started GET "/companies" for 127.0.0.1 at 2021-10-31 15:21:07 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (3.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "left" ASC[0m
  ↳ app/controllers/companies_controller.rb:43:in `build_hash_tree'
Completed 500 Internal Server Error in 14ms (ActiveRecord: 6.8ms | Allocations: 4628)


  
ActiveRecord::StatementInvalid (PG::UndefinedColumn: ERROR:  column "left" does not exist
LINE 1: SELECT "companies".* FROM "companies" ORDER BY "left" ASC
                                                       ^
HINT:  Perhaps you meant to reference the column "companies.lft".
):
  
app/controllers/companies_controller.rb:43:in `build_hash_tree'
app/controllers/companies_controller.rb:14:in `index'
Started GET "/companies" for 127.0.0.1 at 2021-10-31 15:21:17 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (6.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:43:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 0.2ms | Allocations: 88)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 8.5ms | Allocations: 3486)
Completed 200 OK in 82ms (Views: 22.0ms | ActiveRecord: 28.8ms | Allocations: 12339)


Started GET "/companies" for 127.0.0.1 at 2021-10-31 15:23:32 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:43:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 0.3ms | Allocations: 86)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 6.0ms | Allocations: 3518)
Completed 200 OK in 11ms (Views: 6.5ms | ActiveRecord: 0.9ms | Allocations: 4687)


  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.8ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Create (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "lft", "rgt", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Eacme"], ["lft", 9], ["rgt", 10], ["created_at", "2021-10-31 09:54:00.213760"], ["updated_at", "2021-10-31 09:54:00.213760"]]
  [1m[36mCompany Update All (0.6ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 0 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 5 ORDER BY "companies"."lft" ASC)[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Update (0.8ms)[0m  [1m[33mUPDATE "companies" SET "depth" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["depth", 0], ["updated_at", "2021-10-31 09:54:14.728880"], ["id", 5]]
  [1m[36mCompany Update All (0.8ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 0 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 5 ORDER BY "companies"."lft" ASC)[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mCompany Update All (0.6ms)[0m  [1m[33mUPDATE "companies" SET "lft" = CASE WHEN "lft" BETWEEN 5 AND 8 THEN "lft" + 10 - 8 WHEN "lft" BETWEEN 9 AND 10 THEN "lft" + 5 - 9 ELSE "lft" END, "rgt" = CASE WHEN "rgt" BETWEEN 5 AND 8 THEN "rgt" + 10 - 8 WHEN "rgt" BETWEEN 9 AND 10 THEN "rgt" + 5 - 9 ELSE "rgt" END, "parent_id" = CASE WHEN "id" = 5 THEN 4 ELSE "parent_id" END, updated_at = '2021-10-31 09:54:38.597367' WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE ("companies"."lft" BETWEEN 5 AND 10 OR "companies"."rgt" BETWEEN 5 AND 10) ORDER BY "companies"."lft" ASC)[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.7ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "companies" WHERE "companies"."lft" <= 5 AND "companies"."rgt" >= 6 AND ("companies"."id" != 5)[0m
  [1m[36mCompany Update All (0.3ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 2 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 5 ORDER BY "companies"."lft" ASC)[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.7ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 5], ["LIMIT", 1]]
Started GET "/companies" for 127.0.0.1 at 2021-10-31 15:24:41 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:43:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 0.2ms | Allocations: 104)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 6.9ms | Allocations: 3536)
Completed 200 OK in 12ms (Views: 7.6ms | ActiveRecord: 0.9ms | Allocations: 4720)


Started GET "/companies" for 127.0.0.1 at 2021-10-31 15:29:06 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:43:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 1.1ms | Allocations: 192)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 33.4ms | Allocations: 3814)
Completed 200 OK in 85ms (Views: 42.4ms | ActiveRecord: 0.9ms | Allocations: 5739)


Started GET "/companies/1" for 127.0.0.1 at 2021-10-31 15:29:12 +0530
Processing by CompaniesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:18:in `show'
  [1m[36mCompany Load (1.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 1 AND "companies"."lft" < 8 ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:43:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/show.html.erb within layouts/application
  Rendered companies/show.html.erb within layouts/application (Duration: 1.2ms | Allocations: 243)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 16.2ms | Allocations: 3678)
Completed 200 OK in 28ms (Views: 16.7ms | ActiveRecord: 3.2ms | Allocations: 6004)


  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mEmployee Update All (10.6ms)[0m  [1m[33mUPDATE "employees" SET "company_id" = $1 WHERE "employees"."company_id" = $2[0m  [["company_id", nil], ["company_id", 3]]
  [1m[36mCompany Load (0.7ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Destroy (0.9ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."lft" >= 2 AND "companies"."lft" < 3 AND ("companies"."id" != 3) ORDER BY "companies"."lft" ASC)[0m
  [1m[36mCompany Update All (0.8ms)[0m  [1m[33mUPDATE "companies" SET "lft" = ("lft" - 2) WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE ("companies"."lft" > 3) ORDER BY "companies"."lft" ASC)[0m
  [1m[36mCompany Update All (0.4ms)[0m  [1m[33mUPDATE "companies" SET "rgt" = ("rgt" - 2) WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE ("companies"."rgt" > 3) ORDER BY "companies"."lft" ASC)[0m
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Destroy (2.7ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 3]]
  [1m[36mCompany Update All (6.1ms)[0m  [1m[33mUPDATE "companies" SET "children_count" = COALESCE("children_count", 0) - $1 WHERE "companies"."id" = $2[0m  [["children_count", 1], ["id", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCompany Load (8.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mEmployee Update All (6.5ms)[0m  [1m[33mUPDATE "employees" SET "company_id" = $1 WHERE "employees"."company_id" = $2[0m  [["company_id", nil], ["company_id", 3]]
  [1m[36mCompany Load (7.5ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Destroy (6.1ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."lft" >= 2 AND "companies"."lft" < 3 AND ("companies"."id" != 3) ORDER BY "companies"."lft" ASC)[0m
  [1m[36mCompany Update All (2.1ms)[0m  [1m[33mUPDATE "companies" SET "lft" = ("lft" - 2) WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE ("companies"."lft" > 3) ORDER BY "companies"."lft" ASC)[0m
  [1m[36mCompany Update All (1.3ms)[0m  [1m[33mUPDATE "companies" SET "rgt" = ("rgt" - 2) WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE ("companies"."rgt" > 3) ORDER BY "companies"."lft" ASC)[0m
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Destroy (9.8ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 3]]
  [1m[36mCompany Update All (7.0ms)[0m  [1m[33mUPDATE "companies" SET "children_count" = COALESCE("children_count", 0) - $1 WHERE "companies"."id" = $2[0m  [["children_count", 1], ["id", 1]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mEmployee Update All (0.6ms)[0m  [1m[33mUPDATE "employees" SET "company_id" = $1 WHERE "employees"."company_id" = $2[0m  [["company_id", nil], ["company_id", 3]]
  [1m[36mCompany Destroy (0.5ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 3]]
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mEmployee Update All (0.3ms)[0m  [1m[33mUPDATE "employees" SET "company_id" = $1 WHERE "employees"."company_id" = $2[0m  [["company_id", nil], ["company_id", 1]]
  [1m[36mCompany Destroy (0.4ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mEmployee Update All (0.2ms)[0m  [1m[33mUPDATE "employees" SET "company_id" = $1 WHERE "employees"."company_id" = $2[0m  [["company_id", nil], ["company_id", 2]]
  [1m[36mCompany Destroy (0.3ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 2]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mEmployee Update All (0.2ms)[0m  [1m[33mUPDATE "employees" SET "company_id" = $1 WHERE "employees"."company_id" = $2[0m  [["company_id", nil], ["company_id", 4]]
  [1m[36mCompany Destroy (0.2ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 4]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mEmployee Update All (0.2ms)[0m  [1m[33mUPDATE "employees" SET "company_id" = $1 WHERE "employees"."company_id" = $2[0m  [["company_id", nil], ["company_id", 5]]
  [1m[36mCompany Destroy (2.6ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 5]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (69.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "company_manager_development"[0m
  [1m[35m (45.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "company_manager_test"[0m
  [1m[35m (239.5ms)[0m  [1m[35mCREATE DATABASE "company_manager_development" ENCODING = 'unicode'[0m
  [1m[35m (138.3ms)[0m  [1m[35mCREATE DATABASE "company_manager_test" ENCODING = 'unicode'[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5474093982214418400)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateCompanies (20211031060236)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "sub_company_count" integer DEFAULT 0, "employees_count" integer DEFAULT 0, "country" character varying, "parent_id" integer, "lft" integer, "rgt" integer, "depth" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211031060236"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateEmployees (20211031060434)
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE "employees" ("id" bigserial primary key, "company_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_15ca1438d5"
FOREIGN KEY ("company_id")
  REFERENCES "companies" ("id")
)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_employees_on_company_id" ON "employees" ("company_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211031060434"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-10-31 10:16:38.071260"], ["updated_at", "2021-10-31 10:16:38.071260"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(5474093982214418400)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Create (0.8ms)[0m  [1m[32mINSERT INTO "companies" ("name", "lft", "rgt", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Acme"], ["lft", 1], ["rgt", 2], ["created_at", "2021-10-31 10:16:54.278895"], ["updated_at", "2021-10-31 10:16:54.278895"]]
  [1m[36mCompany Update All (0.8ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 0 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 1 ORDER BY "companies"."lft" ASC)[0m
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.8ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("name", "lft", "rgt", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Bacme"], ["lft", 3], ["rgt", 4], ["created_at", "2021-10-31 10:17:27.032610"], ["updated_at", "2021-10-31 10:17:27.032610"]]
  [1m[36mCompany Update All (0.5ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 0 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 2 ORDER BY "companies"."lft" ASC)[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Update All (1.4ms)[0m  [1m[33mUPDATE "companies" SET "lft" = CASE WHEN "lft" BETWEEN 2 AND 2 THEN "lft" + 4 - 2 WHEN "lft" BETWEEN 3 AND 4 THEN "lft" + 2 - 3 ELSE "lft" END, "rgt" = CASE WHEN "rgt" BETWEEN 2 AND 2 THEN "rgt" + 4 - 2 WHEN "rgt" BETWEEN 3 AND 4 THEN "rgt" + 2 - 3 ELSE "rgt" END, "parent_id" = CASE WHEN "id" = 2 THEN 1 ELSE "parent_id" END, updated_at = '2021-10-31 10:17:47.771078' WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE ("companies"."lft" BETWEEN 2 AND 4 OR "companies"."rgt" BETWEEN 2 AND 4) ORDER BY "companies"."lft" ASC)[0m
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Update All (0.4ms)[0m  [1m[33mUPDATE "companies" SET "sub_company_count" = COALESCE("sub_company_count", 0) + $1 WHERE "companies"."id" = $2[0m  [["sub_company_count", 1], ["id", 1]]
  [1m[36mTRANSACTION (4.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.9ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (2.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "companies" WHERE "companies"."lft" <= 2 AND "companies"."rgt" >= 3 AND ("companies"."id" != 2)[0m
  [1m[36mCompany Update All (0.6ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 1 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 2 ORDER BY "companies"."lft" ASC)[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.7ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mEmployee Create (7.8ms)[0m  [1m[32mINSERT INTO "employees" ("company_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["company_id", 1], ["created_at", "2021-10-31 10:37:21.462682"], ["updated_at", "2021-10-31 10:37:21.462682"]]
  [1m[36mCompany Update All (0.4ms)[0m  [1m[33mUPDATE "companies" SET "employees_count" = COALESCE("employees_count", 0) + $1 WHERE "companies"."id" = $2[0m  [["employees_count", 1], ["id", 1]]
  [1m[36mTRANSACTION (4.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2021-10-31 16:16:17 +0530
  [1m[35m (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/mishaelajay/.rvm/gems/ruby-2.6.3/gems/railties-6.1.4.1/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/mishaelajay/.rvm/gems/ruby-2.6.3/gems/railties-6.1.4.1/lib/rails/templates/rails/welcome/index.html.erb (Duration: 8.6ms | Allocations: 355)
Completed 200 OK in 34ms (Views: 13.1ms | ActiveRecord: 0.0ms | Allocations: 2684)


Started GET "/companies" for 127.0.0.1 at 2021-10-31 16:16:22 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (1.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:43:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 5.8ms | Allocations: 2276)
  Rendered layout layouts/application.html.erb (Duration: 6.6ms | Allocations: 2348)
Completed 500 Internal Server Error in 79ms (ActiveRecord: 9.6ms | Allocations: 14739)


  
ActionView::Template::Error (undefined method `html_safe' for {:name=>"Bacme", :employees_count=>0}:Hash
Did you mean?  html_safe?):
    1: <%= render_hash_tree(@company_tree) %>
  
app/helpers/application_helper.rb:7:in `block (2 levels) in render_hash_tree'
app/helpers/application_helper.rb:4:in `each_pair'
app/helpers/application_helper.rb:4:in `block in render_hash_tree'
app/helpers/application_helper.rb:3:in `render_hash_tree'
app/helpers/application_helper.rb:6:in `block (2 levels) in render_hash_tree'
app/helpers/application_helper.rb:4:in `each_pair'
app/helpers/application_helper.rb:4:in `block in render_hash_tree'
app/helpers/application_helper.rb:3:in `render_hash_tree'
app/views/companies/index.html.erb:1
Started GET "/companies" for 127.0.0.1 at 2021-10-31 16:16:37 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:43:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 0.9ms | Allocations: 1842)
  Rendered layout layouts/application.html.erb (Duration: 1.1ms | Allocations: 1913)
Completed 500 Internal Server Error in 21ms (ActiveRecord: 4.4ms | Allocations: 11631)


  
ActionView::Template::Error (undefined method `+' for {:name=>"Acme", :employees_count=>1}:Hash):
    1: <%= render_hash_tree(@company_tree) %>
  
app/helpers/application_helper.rb:6:in `block (2 levels) in render_hash_tree'
app/helpers/application_helper.rb:4:in `each_pair'
app/helpers/application_helper.rb:4:in `block in render_hash_tree'
app/helpers/application_helper.rb:3:in `render_hash_tree'
app/views/companies/index.html.erb:1
Started GET "/companies" for 127.0.0.1 at 2021-10-31 16:17:34 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:43:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 0.2ms | Allocations: 78)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 24.7ms | Allocations: 5262)
Completed 200 OK in 44ms (Views: 25.5ms | ActiveRecord: 4.6ms | Allocations: 14670)


Started GET "/companies" for 127.0.0.1 at 2021-10-31 16:18:20 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:43:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 0.2ms | Allocations: 78)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 15.4ms | Allocations: 3475)
Completed 200 OK in 41ms (Views: 17.7ms | ActiveRecord: 7.4ms | Allocations: 12829)


Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 16:18:24 +0530
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  Rendered companies/new.html.erb within layouts/application (Duration: 104.2ms | Allocations: 54763)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 110.0ms | Allocations: 58101)
Completed 200 OK in 112ms (Views: 110.5ms | ActiveRecord: 0.0ms | Allocations: 58646)


Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 16:19:12 +0530
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  [1m[36mCompany Load (1.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
  ↳ app/views/companies/new.html.erb:3
  Rendered companies/new.html.erb within layouts/application (Duration: 32.9ms | Allocations: 26105)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 47.2ms | Allocations: 29629)
Completed 200 OK in 66ms (Views: 48.5ms | ActiveRecord: 6.3ms | Allocations: 38974)


Started POST "/companies" for 127.0.0.1 at 2021-10-31 16:19:18 +0530
Processing by CompaniesController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "company"=>{"name"=>"Acme", "parent"=>"2", "country"=>"AF"}, "commit"=>"Create Company"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 680)


  
ActiveModel::ForbiddenAttributesError (ActiveModel::ForbiddenAttributesError):
  
app/controllers/companies_controller.rb:9:in `create'
Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 16:21:55 +0530
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  [1m[36mCompany Load (1.7ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
  ↳ app/views/companies/new.html.erb:3
  Rendered companies/new.html.erb within layouts/application (Duration: 47.3ms | Allocations: 24960)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 117.2ms | Allocations: 28296)
Completed 200 OK in 123ms (Views: 117.2ms | ActiveRecord: 1.7ms | Allocations: 28711)


Started POST "/companies" for 127.0.0.1 at 2021-10-31 16:22:05 +0530
Processing by CompaniesController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "company"=>{"name"=>"Acme", "parent"=>"1", "country"=>"AF"}, "commit"=>"Create Company"}
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms | Allocations: 663)


  
ActiveModel::ForbiddenAttributesError (ActiveModel::ForbiddenAttributesError):
  
app/controllers/companies_controller.rb:9:in `create'
Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 16:22:08 +0530
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
  ↳ app/views/companies/new.html.erb:3
  Rendered companies/new.html.erb within layouts/application (Duration: 49.6ms | Allocations: 24961)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 54.4ms | Allocations: 28297)
Completed 200 OK in 56ms (Views: 54.4ms | ActiveRecord: 0.8ms | Allocations: 28707)


Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 16:24:55 +0530
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  [1m[36mCompany Load (5.8ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."name" ASC[0m
  ↳ app/views/companies/new.html.erb:3
  [1m[36mCompany Load (7.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
  ↳ app/views/companies/new.html.erb:4
  Rendered companies/new.html.erb within layouts/application (Duration: 79.8ms | Allocations: 26007)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 105.3ms | Allocations: 29531)
Completed 200 OK in 111ms (Views: 96.5ms | ActiveRecord: 12.7ms | Allocations: 30685)


Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 16:25:18 +0530
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  [1m[36mCompany Load (4.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."name" ASC[0m
  ↳ app/views/companies/new.html.erb:3
  Rendered companies/new.html.erb within layouts/application (Duration: 68.7ms | Allocations: 22616)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 77.1ms | Allocations: 26145)
Completed 200 OK in 82ms (Views: 76.3ms | ActiveRecord: 4.0ms | Allocations: 27292)


Started POST "/companies" for 127.0.0.1 at 2021-10-31 16:25:30 +0530
Processing by CompaniesController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "company"=>{"name"=>"Acme", "parent_id"=>"2", "country"=>"AL"}, "commit"=>"Create Company"}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms | Allocations: 663)


  
ActiveModel::ForbiddenAttributesError (ActiveModel::ForbiddenAttributesError):
  
app/controllers/companies_controller.rb:9:in `create'
Started POST "/companies" for 127.0.0.1 at 2021-10-31 16:27:20 +0530
Processing by CompaniesController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "company"=>{"name"=>"Acme", "parent_id"=>"2", "country"=>"AL"}, "commit"=>"Create Company"}
Completed 500 Internal Server Error in 40ms (ActiveRecord: 6.9ms | Allocations: 8779)


  
ActiveModel::ForbiddenAttributesError (ActiveModel::ForbiddenAttributesError):
  
app/controllers/companies_controller.rb:9:in `create'
Started POST "/companies" for 127.0.0.1 at 2021-10-31 16:27:46 +0530
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by CompaniesController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "company"=>{"name"=>"Acme", "parent_id"=>"2", "country"=>"AL"}, "commit"=>"Create Company"}
Completed 500 Internal Server Error in 45ms (ActiveRecord: 4.4ms | Allocations: 11231)


  
ActiveModel::ForbiddenAttributesError (ActiveModel::ForbiddenAttributesError):
  
app/controllers/companies_controller.rb:9:in `create'
Started POST "/companies" for 127.0.0.1 at 2021-10-31 16:28:53 +0530
Processing by CompaniesController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "company"=>{"name"=>"Acme", "parent_id"=>"2", "country"=>"AL"}, "commit"=>"Create Company"}
Completed 500 Internal Server Error in 140ms (ActiveRecord: 38.2ms | Allocations: 8972)


  
ActiveModel::ForbiddenAttributesError (ActiveModel::ForbiddenAttributesError):
  
app/controllers/companies_controller.rb:9:in `create'
Started POST "/companies" for 127.0.0.1 at 2021-10-31 16:29:06 +0530
Processing by CompaniesController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "company"=>{"name"=>"Acme", "parent_id"=>"2", "country"=>"AL"}, "commit"=>"Create Company"}
Completed 500 Internal Server Error in 90804ms (ActiveRecord: 5.9ms | Allocations: 73749)


  
ActiveModel::ForbiddenAttributesError (ActiveModel::ForbiddenAttributesError):
  
app/controllers/companies_controller.rb:10:in `create'
Started POST "/companies" for 127.0.0.1 at 2021-10-31 16:30:40 +0530
Processing by CompaniesController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "company"=>{"name"=>"Acme", "parent_id"=>"2", "country"=>"AL"}, "commit"=>"Create Company"}
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (1.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (1.4ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Create (1.6ms)[0m  [1m[32mINSERT INTO "companies" ("name", "country", "parent_id", "lft", "rgt", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "Acme"], ["country", "AL"], ["parent_id", 2], ["lft", 5], ["rgt", 6], ["created_at", "2021-10-31 11:00:40.265170"], ["updated_at", "2021-10-31 11:00:40.265170"]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Update All (4.3ms)[0m  [1m[33mUPDATE "companies" SET "sub_company_count" = COALESCE("sub_company_count", 0) + $1 WHERE "companies"."id" = $2[0m  [["sub_company_count", 1], ["id", 2]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (1.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 ORDER BY "companies"."lft" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (0.9ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Update All (1.4ms)[0m  [1m[33mUPDATE "companies" SET "lft" = CASE WHEN "lft" BETWEEN 3 AND 4 THEN "lft" + 6 - 4 WHEN "lft" BETWEEN 5 AND 6 THEN "lft" + 3 - 5 ELSE "lft" END, "rgt" = CASE WHEN "rgt" BETWEEN 3 AND 4 THEN "rgt" + 6 - 4 WHEN "rgt" BETWEEN 5 AND 6 THEN "rgt" + 3 - 5 ELSE "rgt" END, "parent_id" = CASE WHEN "id" = 3 THEN 2 ELSE "parent_id" END, updated_at = '2021-10-31 11:00:40.306633' WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE ("companies"."lft" BETWEEN 3 AND 6 OR "companies"."rgt" BETWEEN 3 AND 6) ORDER BY "companies"."lft" ASC)[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Update All (0.9ms)[0m  [1m[33mUPDATE "companies" SET "sub_company_count" = COALESCE("sub_company_count", 0) - $1 WHERE "companies"."id" = $2[0m  [["sub_company_count", 1], ["id", 2]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (1.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Update All (1.1ms)[0m  [1m[33mUPDATE "companies" SET "sub_company_count" = COALESCE("sub_company_count", 0) + $1 WHERE "companies"."id" = $2[0m  [["sub_company_count", 1], ["id", 2]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (1.0ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (1.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "companies" WHERE "companies"."lft" <= 3 AND "companies"."rgt" >= 4 AND ("companies"."id" != 3)[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Update All (1.0ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 2 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 3 ORDER BY "companies"."lft" ASC)[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (0.8ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "companies" WHERE "companies"."lft" <= 3 AND "companies"."rgt" >= 4 AND ("companies"."id" != 3)[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Update All (0.8ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 2 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 3 ORDER BY "companies"."lft" ASC)[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
Redirected to http://127.0.0.1:3000/companies/3
Completed 302 Found in 102ms (ActiveRecord: 33.0ms | Allocations: 33026)


Started GET "/companies/3" for 127.0.0.1 at 2021-10-31 16:30:40 +0530
Processing by CompaniesController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mCompany Load (1.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:19:in `show'
  [1m[36mCompany Load (1.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 3 AND "companies"."lft" < 4 ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/show.html.erb within layouts/application
  Rendered companies/show.html.erb within layouts/application (Duration: 14.7ms | Allocations: 3685)
  Rendered layout layouts/application.html.erb (Duration: 14.9ms | Allocations: 3756)
Completed 500 Internal Server Error in 29ms (ActiveRecord: 2.4ms | Allocations: 6542)


  
ActionView::Template::Error (undefined method `employee_count' for #<Company:0x00007f828f8b4d90>
Did you mean?  employees_count
               employees_count=
               employees_count?):
    1: <ul>
    2:   <li>Company name: <%= @company.name %></li>
    3:   <li>Company country: <%= @company.country %></li>
    4:   <li>Company Employee count: <%= @company.employee_count %></li>
    5: </ul>
    6: <%= render_hash_tree(@company_tree) %>
  
app/views/companies/show.html.erb:4
Started GET "/companies/3" for 127.0.0.1 at 2021-10-31 16:31:04 +0530
Processing by CompaniesController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mCompany Load (1.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:19:in `show'
  [1m[36mCompany Load (1.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 3 AND "companies"."lft" < 4 ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/show.html.erb within layouts/application
  Rendered companies/show.html.erb within layouts/application (Duration: 0.7ms | Allocations: 202)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 23.7ms | Allocations: 5415)
Completed 200 OK in 35ms (Views: 27.0ms | ActiveRecord: 2.4ms | Allocations: 7981)


Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 16:31:12 +0530
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  [1m[36mCompany Load (1.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."name" ASC[0m
  ↳ app/views/companies/new.html.erb:3
  Rendered companies/new.html.erb within layouts/application (Duration: 99.2ms | Allocations: 54582)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 105.3ms | Allocations: 57918)
Completed 200 OK in 107ms (Views: 104.7ms | ActiveRecord: 1.1ms | Allocations: 58466)


  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mEmployee Update All (6.4ms)[0m  [1m[33mUPDATE "employees" SET "company_id" = $1 WHERE "employees"."company_id" = $2[0m  [["company_id", nil], ["company_id", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mEmployee Load (0.5ms)[0m  [1m[34mSELECT "employees".* FROM "employees"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mEmployee Destroy (0.3ms)[0m  [1m[31mDELETE FROM "employees" WHERE "employees"."id" = $1[0m  [["id", 1]]
  [1m[36mCompany Update All (0.4ms)[0m  [1m[33mUPDATE "companies" SET "employees_count" = COALESCE("employees_count", 0) - $1 WHERE "companies"."id" = $2[0m  [["employees_count", 1], ["id", 1]]
  [1m[36mTRANSACTION (3.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mEmployee Update All (0.3ms)[0m  [1m[33mUPDATE "employees" SET "company_id" = $1 WHERE "employees"."company_id" = $2[0m  [["company_id", nil], ["company_id", 2]]
  [1m[36mCompany Update All (0.3ms)[0m  [1m[33mUPDATE "companies" SET "employees_count" = COALESCE("employees_count", 0) + $1 WHERE "companies"."id" = $2[0m  [["employees_count", 0], ["id", 2]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Destroy (0.9ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."lft" >= 2 AND "companies"."lft" < 5 AND ("companies"."id" != 2) ORDER BY "companies"."lft" ASC)[0m
  [1m[36mCompany Update All (0.3ms)[0m  [1m[33mUPDATE "companies" SET "lft" = ("lft" - 4) WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE ("companies"."lft" > 5) ORDER BY "companies"."lft" ASC)[0m
  [1m[36mCompany Update All (0.3ms)[0m  [1m[33mUPDATE "companies" SET "rgt" = ("rgt" - 4) WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE ("companies"."rgt" > 5) ORDER BY "companies"."lft" ASC)[0m
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Destroy (1.1ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 2]]
  [1m[36mCompany Update All (0.8ms)[0m  [1m[33mUPDATE "companies" SET "sub_company_count" = COALESCE("sub_company_count", 0) - $1 WHERE "companies"."id" = $2[0m  [["sub_company_count", 1], ["id", 1]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mEmployee Update All (0.2ms)[0m  [1m[33mUPDATE "employees" SET "company_id" = $1 WHERE "employees"."company_id" = $2[0m  [["company_id", nil], ["company_id", 3]]
  [1m[36mCompany Update All (0.2ms)[0m  [1m[33mUPDATE "companies" SET "employees_count" = COALESCE("employees_count", 0) + $1 WHERE "companies"."id" = $2[0m  [["employees_count", 0], ["id", 3]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Destroy (0.4ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 3]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mEmployee Update All (0.3ms)[0m  [1m[33mUPDATE "employees" SET "company_id" = $1 WHERE "employees"."company_id" = $2[0m  [["company_id", nil], ["company_id", 1]]
  [1m[36mCompany Update All (0.2ms)[0m  [1m[33mUPDATE "companies" SET "employees_count" = COALESCE("employees_count", 0) + $1 WHERE "companies"."id" = $2[0m  [["employees_count", 0], ["id", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Destroy (0.3ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."lft" >= 1 AND "companies"."lft" < 2 AND ("companies"."id" != 1) ORDER BY "companies"."lft" ASC)[0m
  [1m[36mCompany Update All (0.4ms)[0m  [1m[33mUPDATE "companies" SET "lft" = ("lft" - 2) WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE ("companies"."lft" > 2) ORDER BY "companies"."lft" ASC)[0m
  [1m[36mCompany Update All (0.3ms)[0m  [1m[33mUPDATE "companies" SET "rgt" = ("rgt" - 2) WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE ("companies"."rgt" > 2) ORDER BY "companies"."lft" ASC)[0m
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Destroy (0.3ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 1]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 16:32:48 +0530
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  [1m[36mCompany Load (1.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."name" ASC[0m
  ↳ app/views/companies/new.html.erb:3
  Rendered companies/new.html.erb within layouts/application (Duration: 110.4ms | Allocations: 51981)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 135.9ms | Allocations: 57092)
Completed 200 OK in 196ms (Views: 139.8ms | ActiveRecord: 7.1ms | Allocations: 69532)


Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 16:35:30 +0530
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  [1m[36mCompany Load (4.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
  ↳ app/views/companies/new.html.erb:3
  [1m[36mCompany Load (1.8ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."name" ASC[0m
  ↳ app/views/companies/new.html.erb:4
  Rendered companies/new.html.erb within layouts/application (Duration: 101.8ms | Allocations: 29659)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 126.4ms | Allocations: 33185)
Completed 200 OK in 134ms (Views: 125.0ms | ActiveRecord: 5.8ms | Allocations: 34358)


Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 16:36:30 +0530
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  [1m[36mCompany Load (14.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."name" ASC[0m
  ↳ app/views/companies/new.html.erb:4
  Rendered companies/new.html.erb within layouts/application (Duration: 91.9ms | Allocations: 22987)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 136.1ms | Allocations: 26512)
Completed 200 OK in 143ms (Views: 125.4ms | ActiveRecord: 14.2ms | Allocations: 27676)


Started POST "/companies" for 127.0.0.1 at 2021-10-31 16:36:38 +0530
Processing by CompaniesController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "company"=>{"name"=>"Acme", "parent_id"=>"", "country"=>"AX"}, "commit"=>"Create Company"}
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (1.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCACHE Company Load (0.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Create (3.3ms)[0m  [1m[32mINSERT INTO "companies" ("name", "country", "lft", "rgt", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Acme"], ["country", "AX"], ["lft", 1], ["rgt", 2], ["created_at", "2021-10-31 11:06:38.496403"], ["updated_at", "2021-10-31 11:06:38.496403"]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Update All (2.4ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 0 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 4 ORDER BY "companies"."lft" ASC)[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
Redirected to http://127.0.0.1:3000/companies/4
Completed 302 Found in 30ms (ActiveRecord: 11.4ms | Allocations: 6250)


Started GET "/companies/4" for 127.0.0.1 at 2021-10-31 16:36:38 +0530
Processing by CompaniesController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:19:in `show'
  [1m[36mCompany Load (1.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 1 AND "companies"."lft" < 2 ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/show.html.erb within layouts/application
  Rendered companies/show.html.erb within layouts/application (Duration: 0.7ms | Allocations: 204)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 8.3ms | Allocations: 3577)
Completed 200 OK in 27ms (Views: 9.0ms | ActiveRecord: 1.8ms | Allocations: 8425)


Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 16:36:44 +0530
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  [1m[36mCompany Load (1.5ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."name" ASC[0m
  ↳ app/views/companies/new.html.erb:4
  Rendered companies/new.html.erb within layouts/application (Duration: 28.4ms | Allocations: 22617)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 33.2ms | Allocations: 25951)
Completed 200 OK in 35ms (Views: 32.8ms | ActiveRecord: 1.5ms | Allocations: 26370)


Started POST "/companies" for 127.0.0.1 at 2021-10-31 16:37:09 +0530
Processing by CompaniesController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "company"=>{"name"=>"Bacme", "parent_id"=>"4", "country"=>"AQ"}, "commit"=>"Create Company"}
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (1.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (1.8ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Create (21.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "country", "parent_id", "lft", "rgt", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "Bacme"], ["country", "AQ"], ["parent_id", 4], ["lft", 3], ["rgt", 4], ["created_at", "2021-10-31 11:07:09.019433"], ["updated_at", "2021-10-31 11:07:09.019433"]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Update All (1.1ms)[0m  [1m[33mUPDATE "companies" SET "sub_company_count" = COALESCE("sub_company_count", 0) + $1 WHERE "companies"."id" = $2[0m  [["sub_company_count", 1], ["id", 4]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 ORDER BY "companies"."lft" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (1.0ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Update All (1.8ms)[0m  [1m[33mUPDATE "companies" SET "lft" = CASE WHEN "lft" BETWEEN 2 AND 2 THEN "lft" + 4 - 2 WHEN "lft" BETWEEN 3 AND 4 THEN "lft" + 2 - 3 ELSE "lft" END, "rgt" = CASE WHEN "rgt" BETWEEN 2 AND 2 THEN "rgt" + 4 - 2 WHEN "rgt" BETWEEN 3 AND 4 THEN "rgt" + 2 - 3 ELSE "rgt" END, "parent_id" = CASE WHEN "id" = 5 THEN 4 ELSE "parent_id" END, updated_at = '2021-10-31 11:07:09.062401' WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE ("companies"."lft" BETWEEN 2 AND 4 OR "companies"."rgt" BETWEEN 2 AND 4) ORDER BY "companies"."lft" ASC)[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (12.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Update All (1.3ms)[0m  [1m[33mUPDATE "companies" SET "sub_company_count" = COALESCE("sub_company_count", 0) - $1 WHERE "companies"."id" = $2[0m  [["sub_company_count", 1], ["id", 4]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (2.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (3.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Update All (1.8ms)[0m  [1m[33mUPDATE "companies" SET "sub_company_count" = COALESCE("sub_company_count", 0) + $1 WHERE "companies"."id" = $2[0m  [["sub_company_count", 1], ["id", 4]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (2.4ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (1.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[35m (1.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "companies" WHERE "companies"."lft" <= 2 AND "companies"."rgt" >= 3 AND ("companies"."id" != 5)[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Update All (1.5ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 1 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 5 ORDER BY "companies"."lft" ASC)[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (1.0ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[35m (2.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "companies" WHERE "companies"."lft" <= 2 AND "companies"."rgt" >= 3 AND ("companies"."id" != 5)[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Update All (1.7ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 1 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 5 ORDER BY "companies"."lft" ASC)[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mTRANSACTION (4.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
Redirected to http://127.0.0.1:3000/companies/5
Completed 302 Found in 124ms (ActiveRecord: 69.6ms | Allocations: 22425)


Started GET "/companies/5" for 127.0.0.1 at 2021-10-31 16:37:09 +0530
Processing by CompaniesController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:19:in `show'
  [1m[36mCompany Load (4.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 2 AND "companies"."lft" < 3 ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/show.html.erb within layouts/application
  Rendered companies/show.html.erb within layouts/application (Duration: 0.1ms | Allocations: 61)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 9.9ms | Allocations: 3494)
Completed 200 OK in 19ms (Views: 10.4ms | ActiveRecord: 5.2ms | Allocations: 5306)


Started GET "/companies" for 127.0.0.1 at 2021-10-31 16:37:17 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (1.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 0.5ms | Allocations: 163)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 6.1ms | Allocations: 3598)
Completed 200 OK in 12ms (Views: 6.7ms | ActiveRecord: 1.9ms | Allocations: 4884)


Started GET "/companies/5" for 127.0.0.1 at 2021-10-31 16:37:19 +0530
Processing by CompaniesController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mCompany Load (2.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:19:in `show'
  [1m[36mCompany Load (1.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 2 AND "companies"."lft" < 3 ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/show.html.erb within layouts/application
  Rendered companies/show.html.erb within layouts/application (Duration: 0.3ms | Allocations: 61)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 5.9ms | Allocations: 3493)
Completed 200 OK in 18ms (Views: 6.3ms | ActiveRecord: 3.2ms | Allocations: 5304)


Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 16:37:19 +0530
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  [1m[36mCompany Load (1.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."name" ASC[0m
  ↳ app/views/companies/new.html.erb:4
  Rendered companies/new.html.erb within layouts/application (Duration: 26.8ms | Allocations: 22678)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 32.7ms | Allocations: 26012)
Completed 200 OK in 34ms (Views: 32.0ms | ActiveRecord: 1.2ms | Allocations: 26431)


Started GET "/" for 127.0.0.1 at 2021-10-31 16:52:38 +0530
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/mishaelajay/.rvm/gems/ruby-2.6.3/gems/railties-6.1.4.1/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/mishaelajay/.rvm/gems/ruby-2.6.3/gems/railties-6.1.4.1/lib/rails/templates/rails/welcome/index.html.erb (Duration: 7.7ms | Allocations: 239)
Completed 200 OK in 13ms (Views: 8.9ms | Allocations: 1011)


Started GET "/companies/1/employees" for 127.0.0.1 at 2021-10-31 16:52:49 +0530
Processing by EmployeesController#index as HTML
  Parameters: {"company_id"=>"1"}
  Rendering layout layouts/application.html.erb
  Rendering employees/index.html.erb within layouts/application
  Rendered employees/index.html.erb within layouts/application (Duration: 0.8ms | Allocations: 104)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 20.4ms | Allocations: 3675)
Completed 200 OK in 32ms (Views: 30.5ms | Allocations: 5327)


Started GET "/companies/1/employees/new" for 127.0.0.1 at 2021-10-31 16:52:53 +0530
Processing by EmployeesController#new as HTML
  Parameters: {"company_id"=>"1"}
  Rendering layout layouts/application.html.erb
  Rendering employees/new.html.erb within layouts/application
  Rendered employees/new.html.erb within layouts/application (Duration: 6.0ms | Allocations: 1848)
  Rendered layout layouts/application.html.erb (Duration: 6.4ms | Allocations: 1918)
Completed 500 Internal Server Error in 9ms (Allocations: 2390)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    1: <%= simple_form_for @employee do |f| %>
    2:   <%= f.input :name %>
    3:   <%= f.label 'Parent' %>
    4:   <%= f.collection_select :parent_id, Company.order(:name),:id,:name, include_blank: true  %>
  
app/views/employees/new.html.erb:1
Started GET "/companies/1/employees/new" for 127.0.0.1 at 2021-10-31 16:53:10 +0530
Processing by EmployeesController#new as HTML
  Parameters: {"company_id"=>"1"}
  Rendering layout layouts/application.html.erb
  Rendering employees/new.html.erb within layouts/application
  Rendered employees/new.html.erb within layouts/application (Duration: 13.4ms | Allocations: 2737)
  Rendered layout layouts/application.html.erb (Duration: 13.9ms | Allocations: 2807)
Completed 500 Internal Server Error in 64ms (ActiveRecord: 24.7ms | Allocations: 12708)


  
ActionView::Template::Error (undefined method `employees_path' for #<ActionView::Base:0x007feb2c276400>):
    1: <%= simple_form_for @employee do |f| %>
    2:   <%= f.input :name %>
    3:   <%= f.label 'Parent' %>
    4:   <%= f.collection_select :parent_id, Company.order(:name),:id,:name, include_blank: true  %>
  
app/views/employees/new.html.erb:1
Started GET "/companies/1/employees/new" for 127.0.0.1 at 2021-10-31 16:54:59 +0530
Processing by EmployeesController#new as HTML
  Parameters: {"company_id"=>"1"}
  Rendering layout layouts/application.html.erb
  Rendering employees/new.html.erb within layouts/application
  Rendered employees/new.html.erb within layouts/application (Duration: 24.2ms | Allocations: 2855)
  Rendered layout layouts/application.html.erb (Duration: 24.7ms | Allocations: 2925)
Completed 500 Internal Server Error in 47ms (ActiveRecord: 8.1ms | Allocations: 9074)


  
ActionView::Template::Error (undefined method `employees_path' for #<ActionView::Base:0x007feb321de370>):
    1: <%= simple_form_for @employee do |f| %>
    2:   <%= f.label 'Company' %>
    3:   <%= f.collection_select :company_id, Company.order(:name), :id, :name, include_blank: true  %>
    4:   <%= f.button :submit %>
  
app/views/employees/new.html.erb:1
Started GET "/companies/1/employees/new" for 127.0.0.1 at 2021-10-31 16:55:35 +0530
Processing by EmployeesController#new as HTML
  Parameters: {"company_id"=>"1"}
  Rendering layout layouts/application.html.erb
  Rendering employees/new.html.erb within layouts/application
  Rendered employees/new.html.erb within layouts/application (Duration: 13.5ms | Allocations: 2679)
  Rendered layout layouts/application.html.erb (Duration: 13.8ms | Allocations: 2749)
Completed 500 Internal Server Error in 32899ms (ActiveRecord: 3.9ms | Allocations: 54890)


  
ActionView::Template::Error (undefined method `employees_path' for #<ActionView::Base:0x007feb32058190>):
    1: <%= simple_form_for @employee do |f| %>
    2:   <%= f.label 'Company' %>
    3:   <%= f.collection_select :company_id, Company.order(:name), :id, :name, include_blank: true  %>
    4:   <%= f.button :submit %>
  
app/views/employees/new.html.erb:1
Started GET "/companies/1/employees/new" for 127.0.0.1 at 2021-10-31 16:57:13 +0530
Processing by EmployeesController#new as HTML
  Parameters: {"company_id"=>"1"}
  Rendering layout layouts/application.html.erb
  Rendering employees/new.html.erb within layouts/application
  Rendered employees/new.html.erb within layouts/application (Duration: 9.2ms | Allocations: 2828)
  Rendered layout layouts/application.html.erb (Duration: 9.6ms | Allocations: 2898)
Completed 500 Internal Server Error in 5057ms (ActiveRecord: 5.5ms | Allocations: 11250)


  
ActionView::Template::Error (undefined method `employees_path' for #<ActionView::Base:0x007feb2c195f18>):
    1: <%= simple_form_for @employee do |f| %>
    2:   <%= f.label 'Company' %>
    3:   <%= f.collection_select :company_id, Company.order(:name), :id, :name, include_blank: true  %>
    4:   <%= f.button :submit, url: company_employees_path(@employee) %>
  
app/views/employees/new.html.erb:1
Started GET "/companies/1/employees/new" for 127.0.0.1 at 2021-10-31 17:00:06 +0530
Processing by EmployeesController#new as HTML
  Parameters: {"company_id"=>"1"}
  [1m[36mCompany Load (1.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/employees_controller.rb:24:in `set_company'
Completed 404 Not Found in 18ms (ActiveRecord: 7.8ms | Allocations: 5039)


  
ActiveRecord::RecordNotFound (Couldn't find Company with 'id'=1):
  
app/controllers/employees_controller.rb:24:in `set_company'
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
Started GET "/companies/4/employees/new" for 127.0.0.1 at 2021-10-31 17:00:27 +0530
Processing by EmployeesController#new as HTML
  Parameters: {"company_id"=>"4"}
  [1m[36mCompany Load (2.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/employees_controller.rb:24:in `set_company'
  Rendering layout layouts/application.html.erb
  Rendering employees/new.html.erb within layouts/application
  Rendered employees/new.html.erb within layouts/application (Duration: 17.0ms | Allocations: 2672)
  Rendered layout layouts/application.html.erb (Duration: 17.6ms | Allocations: 2742)
Completed 500 Internal Server Error in 100ms (ActiveRecord: 16.9ms | Allocations: 12455)


  
ActionView::Template::Error (undefined method `employees_path' for #<ActionView::Base:0x007feb2b7d4678>):
    1: <%= simple_form_for @employee do |f| %>
    2:   <%= f.label 'Company' %>
    3:   <%= f.collection_select :company_id, Company.order(:name), :id, :name, include_blank: true  %>
    4:   <%= f.button :submit, url: company_employees_path(@employee) %>
  
app/views/employees/new.html.erb:1
Started GET "/companies/4/employees/new" for 127.0.0.1 at 2021-10-31 17:00:59 +0530
Processing by EmployeesController#new as HTML
  Parameters: {"company_id"=>"4"}
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/employees_controller.rb:24:in `set_company'
  Rendering layout layouts/application.html.erb
  Rendering employees/new.html.erb within layouts/application
  [1m[36mCompany Load (1.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."name" ASC[0m
  ↳ app/views/employees/new.html.erb:3
  Rendered employees/new.html.erb within layouts/application (Duration: 4.5ms | Allocations: 2583)
  Rendered layout layouts/application.html.erb (Duration: 4.6ms | Allocations: 2653)
Completed 500 Internal Server Error in 33ms (ActiveRecord: 10.0ms | Allocations: 15754)


  
ActionView::Template::Error (No route matches {:action=>"index", :company_id=>nil, :controller=>"employees"}, missing required keys: [:company_id]):
    1: <%= simple_form_for @employee do |f| %>
    2:   <%= f.label 'Company' %>
    3:   <%= f.collection_select :company_id, Company.order(:name), :id, :name, include_blank: true  %>
    4:   <%= f.button :submit, url: company_employees_path(@employee) %>
    5: <% end %>
  
app/views/employees/new.html.erb:4
app/views/employees/new.html.erb:1
Started GET "/companies/4/employees/new" for 127.0.0.1 at 2021-10-31 17:01:20 +0530
Processing by EmployeesController#new as HTML
  Parameters: {"company_id"=>"4"}
  [1m[36mCompany Load (52.5ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/employees_controller.rb:24:in `set_company'
  Rendering layout layouts/application.html.erb
  Rendering employees/new.html.erb within layouts/application
  [1m[36mCompany Load (2.8ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."name" ASC[0m
  ↳ app/views/employees/new.html.erb:3
  Rendered employees/new.html.erb within layouts/application (Duration: 7.5ms | Allocations: 1705)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 21.7ms | Allocations: 5440)
Completed 200 OK in 92ms (Views: 23.2ms | ActiveRecord: 55.3ms | Allocations: 7463)


Started POST "/employees" for 127.0.0.1 at 2021-10-31 17:01:26 +0530
Processing by EmployeesController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "employee"=>{"company_id"=>"4"}, "commit"=>"Create Employee"}
No template found for EmployeesController#create, rendering head :no_content
Completed 204 No Content in 5ms (ActiveRecord: 0.0ms | Allocations: 1550)


Started GET "/companies/4/employees/new" for 127.0.0.1 at 2021-10-31 17:04:20 +0530
Processing by EmployeesController#new as HTML
  Parameters: {"company_id"=>"4"}
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/employees_controller.rb:26:in `set_company'
  Rendering layout layouts/application.html.erb
  Rendering employees/new.html.erb within layouts/application
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."name" ASC[0m
  ↳ app/views/employees/new.html.erb:3
  Rendered employees/new.html.erb within layouts/application (Duration: 6.1ms | Allocations: 1696)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 16.9ms | Allocations: 5067)
Completed 200 OK in 46ms (Views: 16.8ms | ActiveRecord: 9.2ms | Allocations: 18195)


Started POST "/employees" for 127.0.0.1 at 2021-10-31 17:04:21 +0530
Processing by EmployeesController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "employee"=>{"company_id"=>"4"}, "commit"=>"Create Employee"}
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/employees_controller.rb:31:in `block in respond_or_redirect'
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/employees_controller.rb:31:in `block in respond_or_redirect'
  [1m[36mEmployee Create (2.1ms)[0m  [1m[32mINSERT INTO "employees" ("company_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["company_id", 4], ["created_at", "2021-10-31 11:34:21.743458"], ["updated_at", "2021-10-31 11:34:21.743458"]]
  ↳ app/controllers/employees_controller.rb:31:in `block in respond_or_redirect'
  [1m[36mCompany Update All (1.7ms)[0m  [1m[33mUPDATE "companies" SET "employees_count" = COALESCE("employees_count", 0) + $1 WHERE "companies"."id" = $2[0m  [["employees_count", 1], ["id", 4]]
  ↳ app/controllers/employees_controller.rb:31:in `block in respond_or_redirect'
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/employees_controller.rb:31:in `block in respond_or_redirect'
Redirected to http://127.0.0.1:3000/employees/2
Completed 302 Found in 33ms (ActiveRecord: 8.4ms | Allocations: 4867)


Started GET "/employees/2" for 127.0.0.1 at 2021-10-31 17:04:21 +0530
Processing by EmployeesController#show as HTML
  Parameters: {"id"=>"2"}
  Rendering layout layouts/application.html.erb
  Rendering employees/show.html.erb within layouts/application
  Rendered employees/show.html.erb within layouts/application (Duration: 0.4ms | Allocations: 107)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 6.2ms | Allocations: 3528)
Completed 200 OK in 8ms (Views: 6.8ms | ActiveRecord: 0.0ms | Allocations: 4031)


Started GET "/companies/4/employees/new" for 127.0.0.1 at 2021-10-31 17:04:35 +0530
Processing by EmployeesController#new as HTML
  Parameters: {"company_id"=>"4"}
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/employees_controller.rb:26:in `set_company'
  Rendering layout layouts/application.html.erb
  Rendering employees/new.html.erb within layouts/application
  [1m[36mCompany Load (1.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."name" ASC[0m
  ↳ app/views/employees/new.html.erb:3
  Rendered employees/new.html.erb within layouts/application (Duration: 4.4ms | Allocations: 1512)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 13.1ms | Allocations: 4943)
Completed 200 OK in 21ms (Views: 12.7ms | ActiveRecord: 1.9ms | Allocations: 6216)


Started GET "/companies/4" for 127.0.0.1 at 2021-10-31 17:04:38 +0530
Processing by CompaniesController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:19:in `show'
  [1m[36mCompany Load (1.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 1 AND "companies"."lft" < 4 ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/show.html.erb within layouts/application
  Rendered companies/show.html.erb within layouts/application (Duration: 0.6ms | Allocations: 218)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 11.4ms | Allocations: 3615)
Completed 200 OK in 21ms (Views: 13.8ms | ActiveRecord: 1.7ms | Allocations: 6068)


Started GET "/companies/4" for 127.0.0.1 at 2021-10-31 17:07:53 +0530
Processing by CompaniesController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:19:in `show'
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 1 AND "companies"."lft" < 4 ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/show.html.erb within layouts/application
  Rendered companies/show.html.erb within layouts/application (Duration: 1.1ms | Allocations: 224)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 17.2ms | Allocations: 3808)
Completed 200 OK in 55ms (Views: 20.5ms | ActiveRecord: 9.9ms | Allocations: 14668)


Started GET "/companies/4/employees/new" for 127.0.0.1 at 2021-10-31 17:07:54 +0530
Processing by EmployeesController#new as HTML
  Parameters: {"company_id"=>"4"}
  [1m[36mCompany Load (1.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/employees_controller.rb:30:in `set_company'
  Rendering layout layouts/application.html.erb
  Rendering employees/new.html.erb within layouts/application
  [1m[36mCompany Load (1.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."name" ASC[0m
  ↳ app/views/employees/new.html.erb:3
  Rendered employees/new.html.erb within layouts/application (Duration: 5.7ms | Allocations: 1850)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 11.4ms | Allocations: 5220)
Completed 200 OK in 44ms (Views: 12.0ms | ActiveRecord: 15.7ms | Allocations: 10532)


Started GET "/employees/2" for 127.0.0.1 at 2021-10-31 17:07:55 +0530
Processing by EmployeesController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mEmployee Load (1.4ms)[0m  [1m[34mSELECT "employees".* FROM "employees" WHERE "employees"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/employees_controller.rb:18:in `show'
  [1m[36mCompany Load (1.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 4]]
  ↳ app/controllers/employees_controller.rb:18:in `show'
  Rendering layout layouts/application.html.erb
  Rendering employees/show.html.erb within layouts/application
  Rendered employees/show.html.erb within layouts/application (Duration: 2.2ms | Allocations: 1528)
  Rendered layout layouts/application.html.erb (Duration: 2.5ms | Allocations: 1598)
Completed 500 Internal Server Error in 22ms (ActiveRecord: 2.5ms | Allocations: 5167)


  
ActionView::Template::Error (undefined method `each_pair' for nil:NilClass):
    3:   <li>Company name: <%= @employee.company.name %></li>
    4:   <li>Company country: <%= @employee.company.country %></li>
    5: </ul>
    6: <%= render_hash_tree(@company_tree) %>
  
app/helpers/application_helper.rb:7:in `block in render_hash_tree'
app/helpers/application_helper.rb:6:in `render_hash_tree'
app/views/employees/show.html.erb:6
Started GET "/companies/4/employees/new" for 127.0.0.1 at 2021-10-31 17:07:58 +0530
Processing by EmployeesController#new as HTML
  Parameters: {"company_id"=>"4"}
  [1m[36mCompany Load (1.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/employees_controller.rb:30:in `set_company'
  Rendering layout layouts/application.html.erb
  Rendering employees/new.html.erb within layouts/application
  [1m[36mCompany Load (1.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."name" ASC[0m
  ↳ app/views/employees/new.html.erb:3
  Rendered employees/new.html.erb within layouts/application (Duration: 5.0ms | Allocations: 1514)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 9.8ms | Allocations: 4947)
Completed 200 OK in 15ms (Views: 8.9ms | ActiveRecord: 2.6ms | Allocations: 6221)


Started GET "/employees/2" for 127.0.0.1 at 2021-10-31 17:08:05 +0530
Processing by EmployeesController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mEmployee Load (1.3ms)[0m  [1m[34mSELECT "employees".* FROM "employees" WHERE "employees"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/employees_controller.rb:18:in `show'
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 4]]
  ↳ app/controllers/employees_controller.rb:18:in `show'
  Rendering layout layouts/application.html.erb
  Rendering employees/show.html.erb within layouts/application
  Rendered employees/show.html.erb within layouts/application (Duration: 0.5ms | Allocations: 169)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 16.0ms | Allocations: 3792)
Completed 200 OK in 27ms (Views: 17.6ms | ActiveRecord: 2.1ms | Allocations: 6658)


Started GET "/employees/2" for 127.0.0.1 at 2021-10-31 17:08:12 +0530
Processing by EmployeesController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mEmployee Load (2.1ms)[0m  [1m[34mSELECT "employees".* FROM "employees" WHERE "employees"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/employees_controller.rb:18:in `show'
  [1m[36mCompany Load (1.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 4]]
  ↳ app/controllers/employees_controller.rb:18:in `show'
  Rendering layout layouts/application.html.erb
  Rendering employees/show.html.erb within layouts/application
  Rendered employees/show.html.erb within layouts/application (Duration: 0.4ms | Allocations: 169)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 20.7ms | Allocations: 3791)
Completed 200 OK in 48ms (Views: 26.1ms | ActiveRecord: 3.4ms | Allocations: 6651)


Started GET "/" for 127.0.0.1 at 2021-10-31 17:09:20 +0530
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/mishaelajay/.rvm/gems/ruby-2.6.3/gems/railties-6.1.4.1/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/mishaelajay/.rvm/gems/ruby-2.6.3/gems/railties-6.1.4.1/lib/rails/templates/rails/welcome/index.html.erb (Duration: 27.0ms | Allocations: 228)
Completed 200 OK in 41ms (Views: 29.9ms | ActiveRecord: 0.0ms | Allocations: 928)


Started GET "/" for 127.0.0.1 at 2021-10-31 17:09:21 +0530
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/mishaelajay/.rvm/gems/ruby-2.6.3/gems/railties-6.1.4.1/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/mishaelajay/.rvm/gems/ruby-2.6.3/gems/railties-6.1.4.1/lib/rails/templates/rails/welcome/index.html.erb (Duration: 0.8ms | Allocations: 44)
Completed 200 OK in 75ms (Views: 1.6ms | ActiveRecord: 0.0ms | Allocations: 710)


Started GET "/companies" for 127.0.0.1 at 2021-10-31 17:09:23 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (2.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 0.6ms | Allocations: 163)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 24.1ms | Allocations: 3786)
Completed 200 OK in 41ms (Views: 29.0ms | ActiveRecord: 2.4ms | Allocations: 5672)


Started GET "/employees/2" for 127.0.0.1 at 2021-10-31 17:09:28 +0530
Processing by EmployeesController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mEmployee Load (1.2ms)[0m  [1m[34mSELECT "employees".* FROM "employees" WHERE "employees"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/employees_controller.rb:18:in `show'
  [1m[36mCompany Load (1.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 4]]
  ↳ app/controllers/employees_controller.rb:18:in `show'
  Rendering layout layouts/application.html.erb
  Rendering employees/show.html.erb within layouts/application
  Rendered employees/show.html.erb within layouts/application (Duration: 0.8ms | Allocations: 227)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 13.2ms | Allocations: 3662)
Completed 200 OK in 26ms (Views: 15.4ms | ActiveRecord: 2.3ms | Allocations: 6309)


Started GET "/companies/4" for 127.0.0.1 at 2021-10-31 17:09:29 +0530
Processing by CompaniesController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:19:in `show'
  [1m[36mCompany Load (1.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 1 AND "companies"."lft" < 4 ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/show.html.erb within layouts/application
  Rendered companies/show.html.erb within layouts/application (Duration: 1.0ms | Allocations: 216)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 7.2ms | Allocations: 3651)
Completed 200 OK in 16ms (Views: 7.9ms | ActiveRecord: 1.8ms | Allocations: 5602)


Started GET "/companies" for 127.0.0.1 at 2021-10-31 17:09:42 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (1.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 0.2ms | Allocations: 75)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 7.6ms | Allocations: 3507)
Completed 200 OK in 16ms (Views: 8.1ms | ActiveRecord: 1.1ms | Allocations: 4666)


Started GET "/companies" for 127.0.0.1 at 2021-10-31 17:09:52 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (1.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 0.5ms | Allocations: 158)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 5.9ms | Allocations: 3779)
Completed 200 OK in 13ms (Views: 7.8ms | ActiveRecord: 1.0ms | Allocations: 5673)


Started GET "/" for 127.0.0.1 at 2021-10-31 17:09:54 +0530
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/mishaelajay/.rvm/gems/ruby-2.6.3/gems/railties-6.1.4.1/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/mishaelajay/.rvm/gems/ruby-2.6.3/gems/railties-6.1.4.1/lib/rails/templates/rails/welcome/index.html.erb (Duration: 7.1ms | Allocations: 228)
Completed 200 OK in 11ms (Views: 9.3ms | ActiveRecord: 0.0ms | Allocations: 910)


Started GET "/" for 127.0.0.1 at 2021-10-31 17:09:56 +0530
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/mishaelajay/.rvm/gems/ruby-2.6.3/gems/railties-6.1.4.1/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/mishaelajay/.rvm/gems/ruby-2.6.3/gems/railties-6.1.4.1/lib/rails/templates/rails/welcome/index.html.erb (Duration: 0.3ms | Allocations: 44)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 397)


Started GET "/companies" for 127.0.0.1 at 2021-10-31 17:09:56 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (1.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 0.3ms | Allocations: 76)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 12.5ms | Allocations: 3511)
Completed 200 OK in 21ms (Views: 14.5ms | ActiveRecord: 1.6ms | Allocations: 4670)


Started GET "/employees/2" for 127.0.0.1 at 2021-10-31 17:09:56 +0530
Processing by EmployeesController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mEmployee Load (1.4ms)[0m  [1m[34mSELECT "employees".* FROM "employees" WHERE "employees"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/employees_controller.rb:18:in `show'
  [1m[36mCompany Load (1.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 4]]
  ↳ app/controllers/employees_controller.rb:18:in `show'
  Rendering layout layouts/application.html.erb
  Rendering employees/show.html.erb within layouts/application
  Rendered employees/show.html.erb within layouts/application (Duration: 0.6ms | Allocations: 218)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 5.9ms | Allocations: 3653)
Completed 200 OK in 17ms (Views: 8.8ms | ActiveRecord: 2.7ms | Allocations: 6295)


Started GET "/employees/2" for 127.0.0.1 at 2021-10-31 17:09:57 +0530
Processing by EmployeesController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mEmployee Load (1.1ms)[0m  [1m[34mSELECT "employees".* FROM "employees" WHERE "employees"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/employees_controller.rb:18:in `show'
  [1m[36mCompany Load (1.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 4]]
  ↳ app/controllers/employees_controller.rb:18:in `show'
  Rendering layout layouts/application.html.erb
  Rendering employees/show.html.erb within layouts/application
  Rendered employees/show.html.erb within layouts/application (Duration: 0.2ms | Allocations: 75)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 5.5ms | Allocations: 3507)
Completed 200 OK in 13ms (Views: 6.0ms | ActiveRecord: 2.0ms | Allocations: 5631)


Started GET "/employees/2" for 127.0.0.1 at 2021-10-31 17:10:06 +0530
Processing by EmployeesController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mEmployee Load (0.9ms)[0m  [1m[34mSELECT "employees".* FROM "employees" WHERE "employees"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/employees_controller.rb:18:in `show'
  [1m[36mCompany Load (1.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 4]]
  ↳ app/controllers/employees_controller.rb:18:in `show'
  Rendering layout layouts/application.html.erb
  Rendering employees/show.html.erb within layouts/application
  Rendered employees/show.html.erb within layouts/application (Duration: 0.5ms | Allocations: 223)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 5.2ms | Allocations: 3845)
Completed 200 OK in 18ms (Views: 8.8ms | ActiveRecord: 2.2ms | Allocations: 6713)


Started GET "/employees/2" for 127.0.0.1 at 2021-10-31 17:10:31 +0530
Processing by EmployeesController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mEmployee Load (1.2ms)[0m  [1m[34mSELECT "employees".* FROM "employees" WHERE "employees"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/employees_controller.rb:18:in `show'
  [1m[36mCompany Load (1.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 4]]
  ↳ app/controllers/employees_controller.rb:18:in `show'
  Rendering layout layouts/application.html.erb
  Rendering employees/show.html.erb within layouts/application
  Rendered employees/show.html.erb within layouts/application (Duration: 0.9ms | Allocations: 254)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 9.4ms | Allocations: 3875)
Completed 200 OK in 20ms (Views: 11.5ms | ActiveRecord: 2.2ms | Allocations: 6735)


Started GET "/companies" for 127.0.0.1 at 2021-10-31 17:10:33 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (7.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 0.9ms | Allocations: 158)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 8.8ms | Allocations: 3593)
Completed 200 OK in 28ms (Views: 11.1ms | ActiveRecord: 7.0ms | Allocations: 5277)


Started GET "/employees/2" for 127.0.0.1 at 2021-10-31 17:11:22 +0530
Processing by EmployeesController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mEmployee Load (1.0ms)[0m  [1m[34mSELECT "employees".* FROM "employees" WHERE "employees"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/employees_controller.rb:18:in `show'
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 4]]
  ↳ app/controllers/employees_controller.rb:18:in `show'
  Rendering layout layouts/application.html.erb
  Rendering employees/show.html.erb within layouts/application
  Rendered employees/show.html.erb within layouts/application (Duration: 0.9ms | Allocations: 296)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 6.3ms | Allocations: 3917)
Completed 200 OK in 16ms (Views: 8.2ms | ActiveRecord: 1.9ms | Allocations: 6776)


Started GET "/companies/4/employees/new" for 127.0.0.1 at 2021-10-31 17:11:23 +0530
Processing by EmployeesController#new as HTML
  Parameters: {"company_id"=>"4"}
  [1m[36mCompany Load (1.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/employees_controller.rb:30:in `set_company'
  Rendering layout layouts/application.html.erb
  Rendering employees/new.html.erb within layouts/application
  [1m[36mCompany Load (1.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."name" ASC[0m
  ↳ app/views/employees/new.html.erb:3
  Rendered employees/new.html.erb within layouts/application (Duration: 10.4ms | Allocations: 1669)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 16.9ms | Allocations: 5101)
Completed 200 OK in 37ms (Views: 16.3ms | ActiveRecord: 2.5ms | Allocations: 6504)


Started GET "/employees/2" for 127.0.0.1 at 2021-10-31 17:11:47 +0530
Processing by EmployeesController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mEmployee Load (2.9ms)[0m  [1m[34mSELECT "employees".* FROM "employees" WHERE "employees"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/employees_controller.rb:18:in `show'
  [1m[36mCompany Load (1.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 4]]
  ↳ app/controllers/employees_controller.rb:18:in `show'
  Rendering layout layouts/application.html.erb
  Rendering employees/show.html.erb within layouts/application
  Rendered employees/show.html.erb within layouts/application (Duration: 1.5ms | Allocations: 301)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 9.5ms | Allocations: 3922)
Completed 200 OK in 28ms (Views: 13.4ms | ActiveRecord: 4.1ms | Allocations: 6804)


Started GET "/companies/4/employees/new" for 127.0.0.1 at 2021-10-31 17:12:15 +0530
Processing by EmployeesController#new as HTML
  Parameters: {"company_id"=>"4"}
  [1m[36mCompany Load (5.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/employees_controller.rb:30:in `set_company'
  Rendering layout layouts/application.html.erb
  Rendering employees/new.html.erb within layouts/application
  [1m[36mCompany Load (7.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."name" ASC[0m
  ↳ app/views/employees/new.html.erb:3
  Rendered employees/new.html.erb within layouts/application (Duration: 11.4ms | Allocations: 1674)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 25.1ms | Allocations: 5295)
Completed 200 OK in 60ms (Views: 22.7ms | ActiveRecord: 12.3ms | Allocations: 7312)


Started GET "/companies/4/employees/new" for 127.0.0.1 at 2021-10-31 17:13:27 +0530
Processing by EmployeesController#new as HTML
  Parameters: {"company_id"=>"4"}
  [1m[36mCompany Load (9.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/employees_controller.rb:30:in `set_company'
  Rendering layout layouts/application.html.erb
  Rendering employees/new.html.erb within layouts/application
  [1m[36mCompany Load (4.5ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."name" ASC[0m
  ↳ app/views/employees/new.html.erb:3
  Rendered employees/new.html.erb within layouts/application (Duration: 12.0ms | Allocations: 1657)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 29.6ms | Allocations: 5277)
Completed 200 OK in 51ms (Views: 28.5ms | ActiveRecord: 14.0ms | Allocations: 7286)


Started POST "/employees" for 127.0.0.1 at 2021-10-31 17:13:30 +0530
Processing by EmployeesController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "employee"=>{"company_id"=>"5"}, "commit"=>"Create Employee"}
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/employees_controller.rb:35:in `block in respond_or_redirect'
  [1m[36mCompany Load (1.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/employees_controller.rb:35:in `block in respond_or_redirect'
  [1m[36mEmployee Create (5.7ms)[0m  [1m[32mINSERT INTO "employees" ("company_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["company_id", 5], ["created_at", "2021-10-31 11:43:30.286055"], ["updated_at", "2021-10-31 11:43:30.286055"]]
  ↳ app/controllers/employees_controller.rb:35:in `block in respond_or_redirect'
  [1m[36mCompany Update All (1.0ms)[0m  [1m[33mUPDATE "companies" SET "employees_count" = COALESCE("employees_count", 0) + $1 WHERE "companies"."id" = $2[0m  [["employees_count", 1], ["id", 5]]
  ↳ app/controllers/employees_controller.rb:35:in `block in respond_or_redirect'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/employees_controller.rb:35:in `block in respond_or_redirect'
Redirected to http://127.0.0.1:3000/employees/3
Completed 302 Found in 30ms (ActiveRecord: 10.4ms | Allocations: 4759)


Started GET "/employees/3" for 127.0.0.1 at 2021-10-31 17:13:30 +0530
Processing by EmployeesController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mEmployee Load (0.6ms)[0m  [1m[34mSELECT "employees".* FROM "employees" WHERE "employees"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/employees_controller.rb:18:in `show'
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 5]]
  ↳ app/controllers/employees_controller.rb:18:in `show'
  Rendering layout layouts/application.html.erb
  Rendering employees/show.html.erb within layouts/application
  Rendered employees/show.html.erb within layouts/application (Duration: 0.6ms | Allocations: 299)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 5.0ms | Allocations: 3734)
Completed 200 OK in 11ms (Views: 5.4ms | ActiveRecord: 1.3ms | Allocations: 5986)


Started GET "/companies" for 127.0.0.1 at 2021-10-31 17:13:33 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (1.5ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 0.5ms | Allocations: 158)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 8.9ms | Allocations: 3593)
Completed 200 OK in 19ms (Views: 11.0ms | ActiveRecord: 1.5ms | Allocations: 5277)


Started GET "/companies/5/employees/new" for 127.0.0.1 at 2021-10-31 17:13:35 +0530
Processing by EmployeesController#new as HTML
  Parameters: {"company_id"=>"5"}
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/employees_controller.rb:30:in `set_company'
  Rendering layout layouts/application.html.erb
  Rendering employees/new.html.erb within layouts/application
  [1m[36mCompany Load (1.5ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."name" ASC[0m
  ↳ app/views/employees/new.html.erb:3
  Rendered employees/new.html.erb within layouts/application (Duration: 5.3ms | Allocations: 1502)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 10.8ms | Allocations: 4934)
Completed 200 OK in 17ms (Views: 10.4ms | ActiveRecord: 2.2ms | Allocations: 6208)


Started POST "/employees" for 127.0.0.1 at 2021-10-31 17:13:38 +0530
Processing by EmployeesController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "employee"=>{"company_id"=>"4"}, "commit"=>"Create Employee"}
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/employees_controller.rb:35:in `block in respond_or_redirect'
  [1m[36mCompany Load (1.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/employees_controller.rb:35:in `block in respond_or_redirect'
  [1m[36mEmployee Create (1.5ms)[0m  [1m[32mINSERT INTO "employees" ("company_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["company_id", 4], ["created_at", "2021-10-31 11:43:38.100194"], ["updated_at", "2021-10-31 11:43:38.100194"]]
  ↳ app/controllers/employees_controller.rb:35:in `block in respond_or_redirect'
  [1m[36mCompany Update All (1.3ms)[0m  [1m[33mUPDATE "companies" SET "employees_count" = COALESCE("employees_count", 0) + $1 WHERE "companies"."id" = $2[0m  [["employees_count", 1], ["id", 4]]
  ↳ app/controllers/employees_controller.rb:35:in `block in respond_or_redirect'
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/employees_controller.rb:35:in `block in respond_or_redirect'
Redirected to http://127.0.0.1:3000/employees/4
Completed 302 Found in 18ms (ActiveRecord: 7.6ms | Allocations: 4520)


Started GET "/employees/4" for 127.0.0.1 at 2021-10-31 17:13:38 +0530
Processing by EmployeesController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mEmployee Load (0.9ms)[0m  [1m[34mSELECT "employees".* FROM "employees" WHERE "employees"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/employees_controller.rb:18:in `show'
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 4]]
  ↳ app/controllers/employees_controller.rb:18:in `show'
  Rendering layout layouts/application.html.erb
  Rendering employees/show.html.erb within layouts/application
  Rendered employees/show.html.erb within layouts/application (Duration: 0.3ms | Allocations: 119)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 5.3ms | Allocations: 3551)
Completed 200 OK in 13ms (Views: 5.8ms | ActiveRecord: 1.8ms | Allocations: 5674)


Started GET "/companies" for 127.0.0.1 at 2021-10-31 17:13:39 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 0.2ms | Allocations: 75)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 7.2ms | Allocations: 3507)
Completed 200 OK in 12ms (Views: 7.8ms | ActiveRecord: 0.8ms | Allocations: 4668)


Started GET "/companies/5/employees/new" for 127.0.0.1 at 2021-10-31 17:13:42 +0530
Processing by EmployeesController#new as HTML
  Parameters: {"company_id"=>"5"}
  [1m[36mCompany Load (2.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/employees_controller.rb:30:in `set_company'
  Rendering layout layouts/application.html.erb
  Rendering employees/new.html.erb within layouts/application
  [1m[36mCompany Load (1.5ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."name" ASC[0m
  ↳ app/views/employees/new.html.erb:3
  Rendered employees/new.html.erb within layouts/application (Duration: 6.9ms | Allocations: 1493)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 19.3ms | Allocations: 4924)
Completed 200 OK in 27ms (Views: 18.5ms | ActiveRecord: 3.7ms | Allocations: 6195)


Started GET "/employees/3" for 127.0.0.1 at 2021-10-31 17:13:43 +0530
Processing by EmployeesController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mEmployee Load (1.2ms)[0m  [1m[34mSELECT "employees".* FROM "employees" WHERE "employees"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/employees_controller.rb:18:in `show'
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 5]]
  ↳ app/controllers/employees_controller.rb:18:in `show'
  Rendering layout layouts/application.html.erb
  Rendering employees/show.html.erb within layouts/application
  Rendered employees/show.html.erb within layouts/application (Duration: 0.3ms | Allocations: 116)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 4.9ms | Allocations: 3549)
Completed 200 OK in 13ms (Views: 5.3ms | ActiveRecord: 2.0ms | Allocations: 5677)


Started GET "/companies" for 127.0.0.1 at 2021-10-31 17:13:45 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (2.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 0.2ms | Allocations: 75)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 8.9ms | Allocations: 3507)
Completed 200 OK in 22ms (Views: 10.5ms | ActiveRecord: 2.6ms | Allocations: 4666)


Started GET "/companies" for 127.0.0.1 at 2021-10-31 17:13:46 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (1.5ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 0.2ms | Allocations: 75)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 6.7ms | Allocations: 3507)
Completed 200 OK in 13ms (Views: 8.6ms | ActiveRecord: 1.5ms | Allocations: 4665)


Started GET "/companies" for 127.0.0.1 at 2021-10-31 17:14:21 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (1.5ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 0.8ms | Allocations: 214)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 7.6ms | Allocations: 3835)
Completed 200 OK in 17ms (Views: 10.4ms | ActiveRecord: 1.5ms | Allocations: 5756)


Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 17:14:22 +0530
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  [1m[36mCompany Load (2.8ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."name" ASC[0m
  ↳ app/views/companies/new.html.erb:4
  Rendered companies/new.html.erb within layouts/application (Duration: 41.3ms | Allocations: 23320)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 46.4ms | Allocations: 26655)
Completed 200 OK in 49ms (Views: 44.5ms | ActiveRecord: 2.8ms | Allocations: 27205)


Started POST "/companies" for 127.0.0.1 at 2021-10-31 17:14:31 +0530
Processing by CompaniesController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "company"=>{"name"=>"Cacme", "parent_id"=>"5", "country"=>"BY"}, "commit"=>"Create Company"}
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (1.5ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (1.3ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Create (1.1ms)[0m  [1m[32mINSERT INTO "companies" ("name", "country", "parent_id", "lft", "rgt", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "Cacme"], ["country", "BY"], ["parent_id", 5], ["lft", 5], ["rgt", 6], ["created_at", "2021-10-31 11:44:31.126644"], ["updated_at", "2021-10-31 11:44:31.126644"]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Update All (0.9ms)[0m  [1m[33mUPDATE "companies" SET "sub_company_count" = COALESCE("sub_company_count", 0) + $1 WHERE "companies"."id" = $2[0m  [["sub_company_count", 1], ["id", 5]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 ORDER BY "companies"."lft" ASC LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (0.9ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Update All (2.9ms)[0m  [1m[33mUPDATE "companies" SET "lft" = CASE WHEN "lft" BETWEEN 3 AND 4 THEN "lft" + 6 - 4 WHEN "lft" BETWEEN 5 AND 6 THEN "lft" + 3 - 5 ELSE "lft" END, "rgt" = CASE WHEN "rgt" BETWEEN 3 AND 4 THEN "rgt" + 6 - 4 WHEN "rgt" BETWEEN 5 AND 6 THEN "rgt" + 3 - 5 ELSE "rgt" END, "parent_id" = CASE WHEN "id" = 6 THEN 5 ELSE "parent_id" END, updated_at = '2021-10-31 11:44:31.149074' WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE ("companies"."lft" BETWEEN 3 AND 6 OR "companies"."rgt" BETWEEN 3 AND 6) ORDER BY "companies"."lft" ASC)[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Update All (0.9ms)[0m  [1m[33mUPDATE "companies" SET "sub_company_count" = COALESCE("sub_company_count", 0) - $1 WHERE "companies"."id" = $2[0m  [["sub_company_count", 1], ["id", 5]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (1.5ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Update All (0.9ms)[0m  [1m[33mUPDATE "companies" SET "sub_company_count" = COALESCE("sub_company_count", 0) + $1 WHERE "companies"."id" = $2[0m  [["sub_company_count", 1], ["id", 5]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (1.4ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "companies" WHERE "companies"."lft" <= 3 AND "companies"."rgt" >= 4 AND ("companies"."id" != 6)[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Update All (1.0ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 2 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 6 ORDER BY "companies"."lft" ASC)[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (0.9ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "companies" WHERE "companies"."lft" <= 3 AND "companies"."rgt" >= 4 AND ("companies"."id" != 6)[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Update All (0.9ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 2 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 6 ORDER BY "companies"."lft" ASC)[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
Redirected to http://127.0.0.1:3000/companies/6
Completed 302 Found in 60ms (ActiveRecord: 24.6ms | Allocations: 21062)


Started GET "/companies/6" for 127.0.0.1 at 2021-10-31 17:14:31 +0530
Processing by CompaniesController#show as HTML
  Parameters: {"id"=>"6"}
  [1m[36mCompany Load (1.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:19:in `show'
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 3 AND "companies"."lft" < 4 ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/show.html.erb within layouts/application
  Rendered companies/show.html.erb within layouts/application (Duration: 0.7ms | Allocations: 251)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 5.6ms | Allocations: 3687)
Completed 200 OK in 24ms (Views: 6.3ms | ActiveRecord: 2.1ms | Allocations: 5629)


Started GET "/companies/6" for 127.0.0.1 at 2021-10-31 17:14:53 +0530
Processing by CompaniesController#show as HTML
  Parameters: {"id"=>"6"}
  [1m[36mCompany Load (1.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:19:in `show'
  [1m[36mCompany Load (1.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 3 AND "companies"."lft" < 4 ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/show.html.erb within layouts/application
  Rendered companies/show.html.erb within layouts/application (Duration: 1.1ms | Allocations: 286)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 6.8ms | Allocations: 3907)
Completed 200 OK in 17ms (Views: 9.8ms | ActiveRecord: 2.0ms | Allocations: 6460)


Started GET "/companies/6" for 127.0.0.1 at 2021-10-31 17:14:55 +0530
Processing by CompaniesController#show as HTML
  Parameters: {"id"=>"6"}
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:19:in `show'
  [1m[36mCompany Load (1.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 3 AND "companies"."lft" < 4 ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/show.html.erb within layouts/application
  Rendered companies/show.html.erb within layouts/application (Duration: 0.3ms | Allocations: 116)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 5.3ms | Allocations: 3548)
Completed 200 OK in 13ms (Views: 6.3ms | ActiveRecord: 2.5ms | Allocations: 5361)


Started GET "/companies/6" for 127.0.0.1 at 2021-10-31 17:14:58 +0530
Processing by CompaniesController#show as HTML
  Parameters: {"id"=>"6"}
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:19:in `show'
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 3 AND "companies"."lft" < 4 ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/show.html.erb within layouts/application
  Rendered companies/show.html.erb within layouts/application (Duration: 0.4ms | Allocations: 109)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 5.5ms | Allocations: 3541)
Completed 200 OK in 11ms (Views: 6.2ms | ActiveRecord: 1.3ms | Allocations: 5353)


Started GET "/companies/6" for 127.0.0.1 at 2021-10-31 17:15:06 +0530
Processing by CompaniesController#show as HTML
  Parameters: {"id"=>"6"}
  [1m[36mCompany Load (1.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:19:in `show'
  [1m[36mCompany Load (1.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 3 AND "companies"."lft" < 4 ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/show.html.erb within layouts/application
  Rendered companies/show.html.erb within layouts/application (Duration: 0.7ms | Allocations: 282)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 7.9ms | Allocations: 3903)
Completed 200 OK in 18ms (Views: 9.9ms | ActiveRecord: 2.2ms | Allocations: 6450)


Started GET "/companies" for 127.0.0.1 at 2021-10-31 17:15:07 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 0.8ms | Allocations: 228)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 8.2ms | Allocations: 3663)
Completed 200 OK in 14ms (Views: 8.9ms | ActiveRecord: 0.8ms | Allocations: 4964)


Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 17:15:12 +0530
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  [1m[36mCompany Load (1.5ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."name" ASC[0m
  ↳ app/views/companies/new.html.erb:4
  Rendered companies/new.html.erb within layouts/application (Duration: 29.4ms | Allocations: 22978)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 34.1ms | Allocations: 26313)
Completed 200 OK in 36ms (Views: 33.1ms | ActiveRecord: 1.5ms | Allocations: 26863)


Started POST "/companies" for 127.0.0.1 at 2021-10-31 17:15:17 +0530
Processing by CompaniesController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "company"=>{"name"=>"adfasdf", "parent_id"=>"", "country"=>"BH"}, "commit"=>"Create Company"}
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (1.5ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Create (1.6ms)[0m  [1m[32mINSERT INTO "companies" ("name", "country", "lft", "rgt", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "adfasdf"], ["country", "BH"], ["lft", 7], ["rgt", 8], ["created_at", "2021-10-31 11:45:17.251447"], ["updated_at", "2021-10-31 11:45:17.251447"]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Update All (1.2ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 0 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 7 ORDER BY "companies"."lft" ASC)[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
Redirected to http://127.0.0.1:3000/companies/7
Completed 302 Found in 35ms (ActiveRecord: 7.5ms | Allocations: 5744)


Started GET "/companies/7" for 127.0.0.1 at 2021-10-31 17:15:17 +0530
Processing by CompaniesController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:19:in `show'
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 7 AND "companies"."lft" < 8 ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/show.html.erb within layouts/application
  Rendered companies/show.html.erb within layouts/application (Duration: 0.3ms | Allocations: 108)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 5.4ms | Allocations: 3541)
Completed 200 OK in 10ms (Views: 5.9ms | ActiveRecord: 1.3ms | Allocations: 5356)


Started GET "/companies" for 127.0.0.1 at 2021-10-31 17:15:19 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (1.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 0.5ms | Allocations: 132)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 7.2ms | Allocations: 3564)
Completed 200 OK in 12ms (Views: 7.8ms | ActiveRecord: 1.0ms | Allocations: 4749)


  [1m[36mCompany Load (1.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" IS NULL ORDER BY "companies"."lft" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (1.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" IS NULL ORDER BY "companies"."lft" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 1 AND "companies"."lft" < 6 /* loading for inspect */ ORDER BY "companies"."lft" ASC LIMIT $1[0m  [["LIMIT", 11]]
  [1m[35m (4.4ms)[0m  [1m[34mSELECT "employee_count" FROM "companies" WHERE "companies"."lft" >= 1 AND "companies"."lft" < 6 ORDER BY "companies"."lft" ASC[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "companies"."employees_count" FROM "companies" WHERE "companies"."lft" >= 1 AND "companies"."lft" < 6 ORDER BY "companies"."lft" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "companies"."employees_count" FROM "companies" WHERE "companies"."lft" >= 1 AND "companies"."lft" < 6 ORDER BY "companies"."lft" ASC[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "companies"."employees_count" FROM "companies" WHERE "companies"."lft" >= 1 AND "companies"."lft" < 6 ORDER BY "companies"."lft" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "companies"."employees_count" FROM "companies" WHERE "companies"."lft" >= 1 AND "companies"."lft" < 6 ORDER BY "companies"."lft" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "companies"."employees_count" FROM "companies" WHERE "companies"."lft" >= 1 AND "companies"."lft" < 6 ORDER BY "companies"."lft" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "companies"."employees_count" FROM "companies" WHERE "companies"."lft" >= 1 AND "companies"."lft" < 6 ORDER BY "companies"."lft" ASC[0m
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 1 AND "companies"."lft" < 6 ORDER BY "companies"."lft" ASC[0m
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 1 AND "companies"."lft" < 6 ORDER BY "companies"."lft" ASC[0m
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 1 AND "companies"."lft" < 6 ORDER BY "companies"."lft" ASC[0m
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "companies"."employees_count" FROM "companies" WHERE "companies"."lft" >= 7 AND "companies"."lft" < 8 ORDER BY "companies"."lft" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "companies"."employees_count" FROM "companies" WHERE "companies"."lft" >= 7 AND "companies"."lft" < 8 ORDER BY "companies"."lft" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (5.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (77.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "company_manager_development"[0m
  [1m[35m (46.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "company_manager_test"[0m
  [1m[35m (136.3ms)[0m  [1m[35mCREATE DATABASE "company_manager_development" ENCODING = 'unicode'[0m
  [1m[35m (69.5ms)[0m  [1m[35mCREATE DATABASE "company_manager_test" ENCODING = 'unicode'[0m
  [1m[35m (7.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5474093982214418400)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateCompanies (20211031060236)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "sub_company_count" integer DEFAULT 0, "employees_count" integer DEFAULT 0, "required_employees_count" integer DEFAULT 0, "country" character varying, "parent_id" integer, "lft" integer, "rgt" integer, "depth" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_companies_on_parent_id" ON "companies" ("parent_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_companies_on_lft" ON "companies" ("lft")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_companies_on_rgt" ON "companies" ("rgt")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE INDEX "index_companies_on_depth" ON "companies" ("depth")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211031060236"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateEmployees (20211031060434)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE "employees" ("id" bigserial primary key, "company_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_15ca1438d5"
FOREIGN KEY ("company_id")
  REFERENCES "companies" ("id")
)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE INDEX "index_employees_on_company_id" ON "employees" ("company_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211031060434"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.7ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-10-31 12:11:05.847517"], ["updated_at", "2021-10-31 12:11:05.847517"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(5474093982214418400)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mCompany Load (3.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2021-10-31 17:41:51 +0530
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/mishaelajay/.rvm/gems/ruby-2.6.3/gems/railties-6.1.4.1/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/mishaelajay/.rvm/gems/ruby-2.6.3/gems/railties-6.1.4.1/lib/rails/templates/rails/welcome/index.html.erb (Duration: 8.2ms | Allocations: 355)
Completed 200 OK in 27ms (Views: 12.1ms | ActiveRecord: 0.0ms | Allocations: 2692)


Started GET "/" for 127.0.0.1 at 2021-10-31 17:41:51 +0530
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/mishaelajay/.rvm/gems/ruby-2.6.3/gems/railties-6.1.4.1/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/mishaelajay/.rvm/gems/ruby-2.6.3/gems/railties-6.1.4.1/lib/rails/templates/rails/welcome/index.html.erb (Duration: 11.1ms | Allocations: 229)
Completed 200 OK in 38ms (Views: 19.6ms | ActiveRecord: 0.0ms | Allocations: 949)


Started GET "/employees/2" for 127.0.0.1 at 2021-10-31 17:43:04 +0530
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by EmployeesController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mEmployee Load (3.9ms)[0m  [1m[34mSELECT "employees".* FROM "employees" WHERE "employees"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/employees_controller.rb:18:in `show'
Completed 404 Not Found in 52ms (ActiveRecord: 11.7ms | Allocations: 7333)


  
ActiveRecord::RecordNotFound (Couldn't find Employee with 'id'=2):
  
app/controllers/employees_controller.rb:18:in `show'
Started GET "/" for 127.0.0.1 at 2021-10-31 17:43:08 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (1.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 1.0ms | Allocations: 205)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 26.6ms | Allocations: 5392)
Completed 200 OK in 41ms (Views: 30.0ms | ActiveRecord: 4.2ms | Allocations: 8772)


Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 17:43:13 +0530
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."name" ASC[0m
  ↳ app/views/companies/new.html.erb:4
  Rendered companies/new.html.erb within layouts/application (Duration: 77.2ms | Allocations: 52335)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 81.4ms | Allocations: 55671)
Completed 200 OK in 95ms (Views: 80.9ms | ActiveRecord: 3.3ms | Allocations: 62270)


Started POST "/companies" for 127.0.0.1 at 2021-10-31 17:43:19 +0530
Processing by CompaniesController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "company"=>{"name"=>"Acme", "parent_id"=>"", "country"=>"DZ"}, "commit"=>"Create Company"}
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (1.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCACHE Company Load (0.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Create (4.8ms)[0m  [1m[32mINSERT INTO "companies" ("name", "country", "lft", "rgt", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Acme"], ["country", "DZ"], ["lft", 1], ["rgt", 2], ["created_at", "2021-10-31 12:13:19.139800"], ["updated_at", "2021-10-31 12:13:19.139800"]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Update All (2.0ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 0 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 1 ORDER BY "companies"."lft" ASC)[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
Redirected to http://127.0.0.1:3000/companies/1
Completed 302 Found in 31ms (ActiveRecord: 11.3ms | Allocations: 7326)


Started GET "/companies/1" for 127.0.0.1 at 2021-10-31 17:43:19 +0530
Processing by CompaniesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:19:in `show'
  [1m[36mCompany Load (2.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 1 AND "companies"."lft" < 2 ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/show.html.erb within layouts/application
  Rendered companies/show.html.erb within layouts/application (Duration: 1.6ms | Allocations: 291)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 23.7ms | Allocations: 3726)
Completed 200 OK in 31ms (Views: 24.3ms | ActiveRecord: 2.6ms | Allocations: 5868)


Started GET "/companies" for 127.0.0.1 at 2021-10-31 17:43:21 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (1.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 0.3ms | Allocations: 81)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 7.6ms | Allocations: 3516)
Completed 200 OK in 16ms (Views: 8.9ms | ActiveRecord: 1.1ms | Allocations: 4688)


Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 17:43:23 +0530
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  [1m[36mCompany Load (1.7ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."name" ASC[0m
  ↳ app/views/companies/new.html.erb:4
  Rendered companies/new.html.erb within layouts/application (Duration: 34.4ms | Allocations: 22679)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 40.5ms | Allocations: 26013)
Completed 200 OK in 42ms (Views: 39.9ms | ActiveRecord: 1.7ms | Allocations: 26435)


Started POST "/companies" for 127.0.0.1 at 2021-10-31 17:43:28 +0530
Processing by CompaniesController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "company"=>{"name"=>"Cacme", "parent_id"=>"1", "country"=>"BE"}, "commit"=>"Create Company"}
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (1.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (1.3ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Create (1.1ms)[0m  [1m[32mINSERT INTO "companies" ("name", "country", "parent_id", "lft", "rgt", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "Cacme"], ["country", "BE"], ["parent_id", 1], ["lft", 3], ["rgt", 4], ["created_at", "2021-10-31 12:13:28.393423"], ["updated_at", "2021-10-31 12:13:28.393423"]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Update All (0.8ms)[0m  [1m[33mUPDATE "companies" SET "sub_company_count" = COALESCE("sub_company_count", 0) + $1 WHERE "companies"."id" = $2[0m  [["sub_company_count", 1], ["id", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 ORDER BY "companies"."lft" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (1.0ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Update All (1.1ms)[0m  [1m[33mUPDATE "companies" SET "lft" = CASE WHEN "lft" BETWEEN 2 AND 2 THEN "lft" + 4 - 2 WHEN "lft" BETWEEN 3 AND 4 THEN "lft" + 2 - 3 ELSE "lft" END, "rgt" = CASE WHEN "rgt" BETWEEN 2 AND 2 THEN "rgt" + 4 - 2 WHEN "rgt" BETWEEN 3 AND 4 THEN "rgt" + 2 - 3 ELSE "rgt" END, "parent_id" = CASE WHEN "id" = 2 THEN 1 ELSE "parent_id" END, updated_at = '2021-10-31 12:13:28.411070' WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE ("companies"."lft" BETWEEN 2 AND 4 OR "companies"."rgt" BETWEEN 2 AND 4) ORDER BY "companies"."lft" ASC)[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Update All (1.5ms)[0m  [1m[33mUPDATE "companies" SET "sub_company_count" = COALESCE("sub_company_count", 0) - $1 WHERE "companies"."id" = $2[0m  [["sub_company_count", 1], ["id", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Update All (1.4ms)[0m  [1m[33mUPDATE "companies" SET "sub_company_count" = COALESCE("sub_company_count", 0) + $1 WHERE "companies"."id" = $2[0m  [["sub_company_count", 1], ["id", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (0.9ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[35m (3.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "companies" WHERE "companies"."lft" <= 2 AND "companies"."rgt" >= 3 AND ("companies"."id" != 2)[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Update All (0.9ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 1 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 2 ORDER BY "companies"."lft" ASC)[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (0.8ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "companies" WHERE "companies"."lft" <= 2 AND "companies"."rgt" >= 3 AND ("companies"."id" != 2)[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Update All (1.1ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 1 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 2 ORDER BY "companies"."lft" ASC)[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
Redirected to http://127.0.0.1:3000/companies/2
Completed 302 Found in 64ms (ActiveRecord: 23.4ms | Allocations: 22472)


Started GET "/companies/2" for 127.0.0.1 at 2021-10-31 17:43:28 +0530
Processing by CompaniesController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:19:in `show'
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 2 AND "companies"."lft" < 3 ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/show.html.erb within layouts/application
  Rendered companies/show.html.erb within layouts/application (Duration: 0.3ms | Allocations: 106)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 6.0ms | Allocations: 3538)
Completed 200 OK in 10ms (Views: 6.4ms | ActiveRecord: 1.2ms | Allocations: 5352)


Started GET "/companies" for 127.0.0.1 at 2021-10-31 17:43:29 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (2.5ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 0.2ms | Allocations: 102)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 7.6ms | Allocations: 3536)
Completed 200 OK in 15ms (Views: 8.0ms | ActiveRecord: 2.5ms | Allocations: 4716)


Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 17:43:32 +0530
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  [1m[36mCompany Load (2.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."name" ASC[0m
  ↳ app/views/companies/new.html.erb:4
  Rendered companies/new.html.erb within layouts/application (Duration: 29.5ms | Allocations: 22674)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 34.1ms | Allocations: 26008)
Completed 200 OK in 36ms (Views: 32.7ms | ActiveRecord: 2.3ms | Allocations: 26429)


Started POST "/companies" for 127.0.0.1 at 2021-10-31 17:43:35 +0530
Processing by CompaniesController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "company"=>{"name"=>"adfasdf", "parent_id"=>"", "country"=>"AX"}, "commit"=>"Create Company"}
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (1.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Load (1.0ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Create (1.0ms)[0m  [1m[32mINSERT INTO "companies" ("name", "country", "lft", "rgt", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "adfasdf"], ["country", "AX"], ["lft", 5], ["rgt", 6], ["created_at", "2021-10-31 12:13:35.969137"], ["updated_at", "2021-10-31 12:13:35.969137"]]
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mCompany Update All (1.4ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 0 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 3 ORDER BY "companies"."lft" ASC)[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/companies_controller.rb:33:in `block in respond_or_redirect'
Redirected to http://127.0.0.1:3000/companies/3
Completed 302 Found in 25ms (ActiveRecord: 8.6ms | Allocations: 5747)


Started GET "/companies/3" for 127.0.0.1 at 2021-10-31 17:43:35 +0530
Processing by CompaniesController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:19:in `show'
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 5 AND "companies"."lft" < 6 ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/show.html.erb within layouts/application
  Rendered companies/show.html.erb within layouts/application (Duration: 0.4ms | Allocations: 106)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 19.3ms | Allocations: 3539)
Completed 200 OK in 24ms (Views: 19.7ms | ActiveRecord: 1.2ms | Allocations: 5353)


Started GET "/companies" for 127.0.0.1 at 2021-10-31 17:43:38 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (1.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 0.3ms | Allocations: 111)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 7.1ms | Allocations: 3543)
Completed 200 OK in 14ms (Views: 8.0ms | ActiveRecord: 1.0ms | Allocations: 4720)


Started GET "/companies" for 127.0.0.1 at 2021-10-31 18:01:32 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (2.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 1.6ms | Allocations: 111)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 31.8ms | Allocations: 3543)
Completed 200 OK in 130ms (Views: 33.4ms | ActiveRecord: 42.6ms | Allocations: 8779)


Started GET "/" for 127.0.0.1 at 2021-10-31 18:01:38 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 0.4ms | Allocations: 111)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 6.0ms | Allocations: 3545)
Completed 200 OK in 11ms (Views: 6.5ms | ActiveRecord: 0.9ms | Allocations: 4735)


Started GET "/" for 127.0.0.1 at 2021-10-31 18:07:58 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (2.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 3.7ms | Allocations: 221)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 29.4ms | Allocations: 3842)
Completed 200 OK in 301ms (Views: 34.9ms | ActiveRecord: 21.0ms | Allocations: 9723)


Started GET "/companies" for 127.0.0.1 at 2021-10-31 18:08:01 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (1.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 0.3ms | Allocations: 117)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 6.5ms | Allocations: 3549)
Completed 200 OK in 13ms (Views: 7.1ms | ActiveRecord: 1.6ms | Allocations: 4722)


Started GET "/companies/7" for 127.0.0.1 at 2021-10-31 18:08:02 +0530
Processing by CompaniesController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mCompany Load (7.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:19:in `show'
Completed 404 Not Found in 21ms (ActiveRecord: 8.1ms | Allocations: 1431)


  
ActiveRecord::RecordNotFound (Couldn't find Company with 'id'=7):
  
app/controllers/companies_controller.rb:19:in `show'
Started GET "/companies" for 127.0.0.1 at 2021-10-31 18:08:03 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (1.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:48:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 0.3ms | Allocations: 111)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 6.5ms | Allocations: 3544)
Completed 200 OK in 12ms (Views: 7.2ms | ActiveRecord: 1.2ms | Allocations: 4720)


Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 18:08:04 +0530
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  [1m[36mCompany Load (3.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."name" ASC[0m
  ↳ app/views/companies/new.html.erb:4
  Rendered companies/new.html.erb within layouts/application (Duration: 48.4ms | Allocations: 8457)
  Rendered layout layouts/application.html.erb (Duration: 48.8ms | Allocations: 8527)
Completed 500 Internal Server Error in 55ms (ActiveRecord: 3.4ms | Allocations: 9054)


  
ActionView::Template::Error (undefined method `required_employee_count' for #<Company:0x00007fc3032f3118>
Did you mean?  required_employees_count
               required_employees_count=
               required_employees_count?
               required_employees_count_was):
    2:   <%= f.input :name %>
    3:   <%= f.label 'Parent' %>
    4:   <%= f.collection_select :parent_id, Company.order(:name),:id,:name, include_blank: true  %>
    5:   <%= f.input :required_employee_count, default: 0 %>
    6:   <%= f.input :country %>
    7:   <%= f.button :submit %>
    8: <% end %>
  
app/views/companies/new.html.erb:5
app/views/companies/new.html.erb:1
Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 18:08:12 +0530
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  [1m[36mCompany Load (1.5ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."name" ASC[0m
  ↳ app/views/companies/new.html.erb:4
  Rendered companies/new.html.erb within layouts/application (Duration: 59.9ms | Allocations: 25426)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 67.2ms | Allocations: 28950)
Completed 200 OK in 74ms (Views: 68.6ms | ActiveRecord: 1.5ms | Allocations: 30113)


Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 18:08:51 +0530
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."name" ASC[0m
  ↳ app/views/companies/new.html.erb:4
  Rendered companies/new.html.erb within layouts/application (Duration: 25.6ms | Allocations: 25282)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 38.8ms | Allocations: 28618)
Completed 200 OK in 88ms (Views: 38.9ms | ActiveRecord: 22.7ms | Allocations: 38183)


Started POST "/companies" for 127.0.0.1 at 2021-10-31 18:09:02 +0530
Processing by CompaniesController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "company"=>{"name"=>"Acme", "parent_id"=>"2", "required_employees_count"=>"7", "country"=>"AL"}, "commit"=>"Create Company"}
  [1m[36mTRANSACTION (10.6ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[36mCompany Load (1.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[36mCompany Load (2.8ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[36mCompany Create (7.1ms)[0m  [1m[32mINSERT INTO "companies" ("name", "required_employees_count", "country", "parent_id", "lft", "rgt", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "Acme"], ["required_employees_count", 7], ["country", "AL"], ["parent_id", 2], ["lft", 7], ["rgt", 8], ["created_at", "2021-10-31 12:39:02.058999"], ["updated_at", "2021-10-31 12:39:02.058999"]]
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[36mCompany Update All (3.5ms)[0m  [1m[33mUPDATE "companies" SET "sub_company_count" = COALESCE("sub_company_count", 0) + $1 WHERE "companies"."id" = $2[0m  [["sub_company_count", 1], ["id", 2]]
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 ORDER BY "companies"."lft" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[36mCompany Load (0.8ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[36mCompany Update All (4.4ms)[0m  [1m[33mUPDATE "companies" SET "lft" = CASE WHEN "lft" BETWEEN 3 AND 6 THEN "lft" + 8 - 6 WHEN "lft" BETWEEN 7 AND 8 THEN "lft" + 3 - 7 ELSE "lft" END, "rgt" = CASE WHEN "rgt" BETWEEN 3 AND 6 THEN "rgt" + 8 - 6 WHEN "rgt" BETWEEN 7 AND 8 THEN "rgt" + 3 - 7 ELSE "rgt" END, "parent_id" = CASE WHEN "id" = 4 THEN 2 ELSE "parent_id" END, updated_at = '2021-10-31 12:39:02.099031' WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE ("companies"."lft" BETWEEN 3 AND 8 OR "companies"."rgt" BETWEEN 3 AND 8) ORDER BY "companies"."lft" ASC)[0m
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[36mCompany Update All (1.2ms)[0m  [1m[33mUPDATE "companies" SET "sub_company_count" = COALESCE("sub_company_count", 0) - $1 WHERE "companies"."id" = $2[0m  [["sub_company_count", 1], ["id", 2]]
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[36mCompany Update All (1.5ms)[0m  [1m[33mUPDATE "companies" SET "sub_company_count" = COALESCE("sub_company_count", 0) + $1 WHERE "companies"."id" = $2[0m  [["sub_company_count", 1], ["id", 2]]
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[36mCompany Load (0.9ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[36mCompany Load (1.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[35m (2.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "companies" WHERE "companies"."lft" <= 3 AND "companies"."rgt" >= 4 AND ("companies"."id" != 4)[0m
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[36mCompany Update All (1.0ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 2 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 4 ORDER BY "companies"."lft" ASC)[0m
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[36mCompany Load (1.2ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "companies" WHERE "companies"."lft" <= 3 AND "companies"."rgt" >= 4 AND ("companies"."id" != 4)[0m
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[36mCompany Update All (0.8ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 2 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 4 ORDER BY "companies"."lft" ASC)[0m
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
Redirected to http://127.0.0.1:3000/companies/4
Completed 302 Found in 90ms (ActiveRecord: 47.3ms | Allocations: 21132)


Started GET "/companies/4" for 127.0.0.1 at 2021-10-31 18:09:02 +0530
Processing by CompaniesController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:19:in `show'
  [1m[36mCompany Load (1.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 3 AND "companies"."lft" < 4 ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:53:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/show.html.erb within layouts/application
  Rendered companies/show.html.erb within layouts/application (Duration: 0.6ms | Allocations: 287)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 17.2ms | Allocations: 3722)
Completed 200 OK in 25ms (Views: 17.9ms | ActiveRecord: 2.3ms | Allocations: 5762)


Started GET "/companies" for 127.0.0.1 at 2021-10-31 18:09:04 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (1.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:53:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 0.7ms | Allocations: 237)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 6.9ms | Allocations: 3672)
Completed 200 OK in 15ms (Views: 7.7ms | ActiveRecord: 1.1ms | Allocations: 4988)


Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 18:09:11 +0530
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  [1m[36mCompany Load (1.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."name" ASC[0m
  ↳ app/views/companies/new.html.erb:4
  Rendered companies/new.html.erb within layouts/application (Duration: 33.7ms | Allocations: 25149)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 40.4ms | Allocations: 28483)
Completed 200 OK in 42ms (Views: 39.4ms | ActiveRecord: 1.9ms | Allocations: 28905)


Started POST "/companies" for 127.0.0.1 at 2021-10-31 18:09:17 +0530
Processing by CompaniesController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "company"=>{"name"=>"Cacme", "parent_id"=>"2", "required_employees_count"=>"0", "country"=>"AI"}, "commit"=>"Create Company"}
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[36mCompany Load (1.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[36mCompany Load (1.6ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[36mCompany Create (1.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "country", "parent_id", "lft", "rgt", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "Cacme"], ["country", "AI"], ["parent_id", 2], ["lft", 9], ["rgt", 10], ["created_at", "2021-10-31 12:39:18.005055"], ["updated_at", "2021-10-31 12:39:18.005055"]]
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[36mCompany Update All (1.6ms)[0m  [1m[33mUPDATE "companies" SET "sub_company_count" = COALESCE("sub_company_count", 0) + $1 WHERE "companies"."id" = $2[0m  [["sub_company_count", 1], ["id", 2]]
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 ORDER BY "companies"."lft" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[36mCompany Load (0.9ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[36mCompany Update All (1.4ms)[0m  [1m[33mUPDATE "companies" SET "lft" = CASE WHEN "lft" BETWEEN 5 AND 8 THEN "lft" + 10 - 8 WHEN "lft" BETWEEN 9 AND 10 THEN "lft" + 5 - 9 ELSE "lft" END, "rgt" = CASE WHEN "rgt" BETWEEN 5 AND 8 THEN "rgt" + 10 - 8 WHEN "rgt" BETWEEN 9 AND 10 THEN "rgt" + 5 - 9 ELSE "rgt" END, "parent_id" = CASE WHEN "id" = 5 THEN 2 ELSE "parent_id" END, updated_at = '2021-10-31 12:39:18.025636' WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE ("companies"."lft" BETWEEN 5 AND 10 OR "companies"."rgt" BETWEEN 5 AND 10) ORDER BY "companies"."lft" ASC)[0m
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[36mCompany Load (2.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[36mCompany Update All (0.9ms)[0m  [1m[33mUPDATE "companies" SET "sub_company_count" = COALESCE("sub_company_count", 0) - $1 WHERE "companies"."id" = $2[0m  [["sub_company_count", 1], ["id", 2]]
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[36mCompany Load (1.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[36mCompany Update All (0.8ms)[0m  [1m[33mUPDATE "companies" SET "sub_company_count" = COALESCE("sub_company_count", 0) + $1 WHERE "companies"."id" = $2[0m  [["sub_company_count", 1], ["id", 2]]
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[36mCompany Load (0.8ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "companies" WHERE "companies"."lft" <= 5 AND "companies"."rgt" >= 6 AND ("companies"."id" != 5)[0m
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[36mCompany Update All (0.9ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 2 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 5 ORDER BY "companies"."lft" ASC)[0m
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[36mCompany Load (0.8ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "companies" WHERE "companies"."lft" <= 5 AND "companies"."rgt" >= 6 AND ("companies"."id" != 5)[0m
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[36mCompany Update All (0.9ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 2 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 5 ORDER BY "companies"."lft" ASC)[0m
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/companies_controller.rb:38:in `block in respond_or_redirect'
Redirected to http://127.0.0.1:3000/companies/5
Completed 302 Found in 80ms (ActiveRecord: 25.1ms | Allocations: 19974)


Started GET "/companies/5" for 127.0.0.1 at 2021-10-31 18:09:18 +0530
Processing by CompaniesController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:19:in `show'
  [1m[36mCompany Load (1.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 5 AND "companies"."lft" < 6 ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:53:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/show.html.erb within layouts/application
  Rendered companies/show.html.erb within layouts/application (Duration: 0.2ms | Allocations: 106)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 4.6ms | Allocations: 3539)
Completed 200 OK in 10ms (Views: 5.0ms | ActiveRecord: 1.7ms | Allocations: 5357)


Started GET "/companies" for 127.0.0.1 at 2021-10-31 18:09:23 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (1.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:53:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 0.4ms | Allocations: 142)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 7.6ms | Allocations: 3574)
Completed 200 OK in 14ms (Views: 8.3ms | ActiveRecord: 1.1ms | Allocations: 4773)


Started GET "/" for 127.0.0.1 at 2021-10-31 21:51:16 +0530
  [1m[35m (15.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (1.5ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:55:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 1.5ms | Allocations: 152)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 23.4ms | Allocations: 3550)
Completed 200 OK in 101ms (Views: 26.2ms | ActiveRecord: 1.5ms | Allocations: 12611)


Started GET "/" for 127.0.0.1 at 2021-10-31 21:51:17 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (1.8ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:55:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 0.2ms | Allocations: 142)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 6.4ms | Allocations: 3574)
Completed 200 OK in 62ms (Views: 7.0ms | ActiveRecord: 1.8ms | Allocations: 5712)


Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 21:51:19 +0530
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  [1m[36mCompany Load (1.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."name" ASC[0m
  ↳ app/views/companies/new.html.erb:4
  Rendered companies/new.html.erb within layouts/application (Duration: 32.5ms | Allocations: 25532)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 38.7ms | Allocations: 28866)
Completed 200 OK in 41ms (Views: 38.4ms | ActiveRecord: 1.3ms | Allocations: 29287)


Started POST "/companies" for 127.0.0.1 at 2021-10-31 21:51:33 +0530
Processing by CompaniesController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "company"=>{"name"=>"Alphabet", "parent_id"=>"", "required_employees_count"=>"3", "country"=>"AS"}, "commit"=>"Create Company"}
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/companies_controller.rb:40:in `block in respond_or_redirect'
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:40:in `block in respond_or_redirect'
  [1m[36mCompany Load (1.9ms)[0m  [1m[37mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:40:in `block in respond_or_redirect'
  [1m[36mCompany Create (1.8ms)[0m  [1m[32mINSERT INTO "companies" ("name", "required_employees_count", "country", "lft", "rgt", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "Alphabet"], ["required_employees_count", 3], ["country", "AS"], ["lft", 11], ["rgt", 12], ["created_at", "2021-10-31 16:21:33.970743"], ["updated_at", "2021-10-31 16:21:33.970743"]]
  ↳ app/controllers/companies_controller.rb:40:in `block in respond_or_redirect'
  [1m[36mCompany Update All (2.0ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 0 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 6 ORDER BY "companies"."lft" ASC)[0m
  ↳ app/controllers/companies_controller.rb:40:in `block in respond_or_redirect'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/companies_controller.rb:40:in `block in respond_or_redirect'
Redirected to http://127.0.0.1:3000/companies/6
Completed 302 Found in 33ms (ActiveRecord: 11.8ms | Allocations: 6844)


Started GET "/companies/6" for 127.0.0.1 at 2021-10-31 21:51:34 +0530
Processing by CompaniesController#show as HTML
  Parameters: {"id"=>"6"}
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:21:in `show'
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 11 AND "companies"."lft" < 12 ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:55:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/show.html.erb within layouts/application
  Rendered companies/show.html.erb within layouts/application (Duration: 0.3ms | Allocations: 106)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 8.4ms | Allocations: 3538)
Completed 200 OK in 15ms (Views: 9.2ms | ActiveRecord: 1.5ms | Allocations: 5517)


Started GET "/companies" for 127.0.0.1 at 2021-10-31 21:51:36 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:55:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 0.4ms | Allocations: 151)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 6.4ms | Allocations: 3583)
Completed 200 OK in 12ms (Views: 7.4ms | ActiveRecord: 0.9ms | Allocations: 4794)


Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 21:51:38 +0530
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  [1m[36mCompany Load (1.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."name" ASC[0m
  ↳ app/views/companies/new.html.erb:4
  Rendered companies/new.html.erb within layouts/application (Duration: 31.7ms | Allocations: 25204)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 37.6ms | Allocations: 28538)
Completed 200 OK in 39ms (Views: 37.1ms | ActiveRecord: 1.1ms | Allocations: 28959)


Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 21:51:52 +0530
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  [1m[36mCompany Load (1.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."name" ASC[0m
  ↳ app/views/companies/new.html.erb:4
  Rendered companies/new.html.erb within layouts/application (Duration: 30.9ms | Allocations: 25238)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 38.1ms | Allocations: 28573)
Completed 200 OK in 40ms (Views: 38.2ms | ActiveRecord: 1.1ms | Allocations: 28995)


Started GET "/" for 127.0.0.1 at 2021-10-31 21:51:53 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:55:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 0.3ms | Allocations: 151)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 7.8ms | Allocations: 3583)
Completed 200 OK in 13ms (Views: 8.3ms | ActiveRecord: 0.9ms | Allocations: 4796)


  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (56.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "company_manager_development"[0m
  [1m[35m (39.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "company_manager_test"[0m
  [1m[35m (164.0ms)[0m  [1m[35mCREATE DATABASE "company_manager_development" ENCODING = 'unicode'[0m
  [1m[35m (68.4ms)[0m  [1m[35mCREATE DATABASE "company_manager_test" ENCODING = 'unicode'[0m
  [1m[35m (14.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5474093982214418400)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateCompanies (20211031060236)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "sub_company_count" integer DEFAULT 0, "employees_count" integer DEFAULT 0, "required_employees_count" integer DEFAULT 0, "valid" boolean DEFAULT FALSE, "country" character varying, "parent_id" integer, "lft" integer, "rgt" integer, "depth" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE INDEX "index_companies_on_parent_id" ON "companies" ("parent_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE INDEX "index_companies_on_lft" ON "companies" ("lft")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE INDEX "index_companies_on_rgt" ON "companies" ("rgt")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_companies_on_depth" ON "companies" ("depth")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211031060236"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateEmployees (20211031060434)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE TABLE "employees" ("id" bigserial primary key, "company_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_15ca1438d5"
FOREIGN KEY ("company_id")
  REFERENCES "companies" ("id")
)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_employees_on_company_id" ON "employees" ("company_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211031060434"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.7ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-10-31 16:22:42.324884"], ["updated_at", "2021-10-31 16:22:42.324884"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(5474093982214418400)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/" for 127.0.0.1 at 2021-10-31 22:13:00 +0530
  [1m[35m (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (9.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:55:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 2.9ms | Allocations: 365)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 21.0ms | Allocations: 5546)
Completed 200 OK in 101ms (Views: 29.7ms | ActiveRecord: 12.4ms | Allocations: 13569)


Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 22:13:04 +0530
Processing by CompaniesController#new as HTML
Completed 500 Internal Server Error in 14ms (ActiveRecord: 6.3ms | Allocations: 2186)


  
ActiveRecord::DangerousAttributeError (valid? is defined by Active Record. Check to make sure that you don't have an attribute or method with the same name.):
  
app/controllers/companies_controller.rb:6:in `new'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (49.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "company_manager_development"[0m
  [1m[35m (43.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "company_manager_test"[0m
  [1m[35m (156.9ms)[0m  [1m[35mCREATE DATABASE "company_manager_development" ENCODING = 'unicode'[0m
  [1m[35m (77.3ms)[0m  [1m[35mCREATE DATABASE "company_manager_test" ENCODING = 'unicode'[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5474093982214418400)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateCompanies (20211031060236)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "sub_company_count" integer DEFAULT 0, "employees_count" integer DEFAULT 0, "required_employees_count" integer DEFAULT 0, "requirement_satisfied" boolean DEFAULT FALSE, "country" character varying, "parent_id" integer, "lft" integer, "rgt" integer, "depth" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_companies_on_parent_id" ON "companies" ("parent_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_companies_on_lft" ON "companies" ("lft")[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE INDEX "index_companies_on_rgt" ON "companies" ("rgt")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_companies_on_depth" ON "companies" ("depth")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211031060236"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateEmployees (20211031060434)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE TABLE "employees" ("id" bigserial primary key, "company_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_15ca1438d5"
FOREIGN KEY ("company_id")
  REFERENCES "companies" ("id")
)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_employees_on_company_id" ON "employees" ("company_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20211031060434"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.8ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-10-31 16:44:37.882519"], ["updated_at", "2021-10-31 16:44:37.882519"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(5474093982214418400)[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/companies/new" for 127.0.0.1 at 2021-10-31 22:14:47 +0530
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by CompaniesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering companies/new.html.erb within layouts/application
  [1m[36mCompany Load (8.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."name" ASC[0m
  ↳ app/views/companies/new.html.erb:4
  Rendered companies/new.html.erb within layouts/application (Duration: 144.4ms | Allocations: 54947)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 166.2ms | Allocations: 60058)
Completed 200 OK in 238ms (Views: 163.3ms | ActiveRecord: 14.5ms | Allocations: 73798)


Started POST "/companies" for 127.0.0.1 at 2021-10-31 22:14:56 +0530
Processing by CompaniesController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "company"=>{"name"=>"Acme", "parent_id"=>"", "required_employees_count"=>"7", "country"=>"AR"}, "commit"=>"Create Company"}
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/companies_controller.rb:40:in `block in respond_or_redirect'
  [1m[36mCompany Load (1.7ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:40:in `block in respond_or_redirect'
  [1m[36mCACHE Company Load (0.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."rgt" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:40:in `block in respond_or_redirect'
  [1m[36mCompany Create (2.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "required_employees_count", "country", "lft", "rgt", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "Acme"], ["required_employees_count", 7], ["country", "AR"], ["lft", 1], ["rgt", 2], ["created_at", "2021-10-31 16:44:56.363309"], ["updated_at", "2021-10-31 16:44:56.363309"]]
  ↳ app/controllers/companies_controller.rb:40:in `block in respond_or_redirect'
  [1m[36mCompany Update All (1.7ms)[0m  [1m[33mUPDATE "companies" SET "depth" = 0 WHERE "companies"."id" IN (SELECT "companies"."id" FROM "companies" WHERE "companies"."id" = 1 ORDER BY "companies"."lft" ASC)[0m
  ↳ app/controllers/companies_controller.rb:40:in `block in respond_or_redirect'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/companies_controller.rb:40:in `block in respond_or_redirect'
Redirected to http://127.0.0.1:3000/companies/1
Completed 302 Found in 43ms (ActiveRecord: 8.7ms | Allocations: 7577)


Started GET "/companies/1" for 127.0.0.1 at 2021-10-31 22:14:56 +0530
Processing by CompaniesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mCompany Load (1.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:21:in `show'
  [1m[36mCompany Load (6.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 1 AND "companies"."lft" < 2 ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:55:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/show.html.erb within layouts/application
  Rendered companies/show.html.erb within layouts/application (Duration: 4.3ms | Allocations: 1581)
  Rendered layout layouts/application.html.erb (Duration: 4.6ms | Allocations: 1652)
Completed 500 Internal Server Error in 23ms (ActiveRecord: 7.3ms | Allocations: 4160)


  
ActionView::Template::Error (No route matches {:action=>"index", :controller=>"employees", :id=>"1"}, missing required keys: [:company_id]):
     5: </ul>
     6: <%= render_hash_tree(@company_tree) %>
     7: 
     8: <%= link_to 'Show companies employees', company_employees_path %>
     9: <%= link_to 'See all companies', companies_path %>
    10: <%= link_to 'Create another company', new_company_path %>
  
app/views/companies/show.html.erb:8
Started GET "/companies/1" for 127.0.0.1 at 2021-10-31 22:15:28 +0530
Processing by CompaniesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:21:in `show'
  [1m[36mCompany Load (1.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 1 AND "companies"."lft" < 2 ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:55:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/show.html.erb within layouts/application
  Rendered companies/show.html.erb within layouts/application (Duration: 1.1ms | Allocations: 353)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 12.4ms | Allocations: 4104)
Completed 200 OK in 22ms (Views: 14.7ms | ActiveRecord: 2.1ms | Allocations: 6939)


Started GET "/companies/1/employees" for 127.0.0.1 at 2021-10-31 22:15:30 +0530
Processing by EmployeesController#index as HTML
  Parameters: {"company_id"=>"1"}
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/employees_controller.rb:38:in `set_company'
  Rendering layout layouts/application.html.erb
  Rendering employees/index.html.erb within layouts/application
  [1m[36mEmployee Load (5.7ms)[0m  [1m[34mSELECT "employees".* FROM "employees" WHERE "employees"."company_id" = $1[0m  [["company_id", 1]]
  ↳ app/views/employees/index.html.erb:2
  Rendered employees/index.html.erb within layouts/application (Duration: 7.6ms | Allocations: 849)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 13.3ms | Allocations: 4248)
Completed 200 OK in 26ms (Views: 9.7ms | ActiveRecord: 7.7ms | Allocations: 7092)


Started GET "/companies/1" for 127.0.0.1 at 2021-10-31 22:15:43 +0530
Processing by CompaniesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:21:in `show'
  [1m[36mCompany Load (1.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 1 AND "companies"."lft" < 2 ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:55:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/show.html.erb within layouts/application
  Rendered companies/show.html.erb within layouts/application (Duration: 0.7ms | Allocations: 326)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 8.6ms | Allocations: 3947)
Completed 200 OK in 21ms (Views: 11.2ms | ActiveRecord: 1.8ms | Allocations: 6501)


Started GET "/companies/1" for 127.0.0.1 at 2021-10-31 22:16:03 +0530
Processing by CompaniesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:21:in `show'
  [1m[36mCompany Load (1.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 1 AND "companies"."lft" < 2 ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:55:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/show.html.erb within layouts/application
  Rendered companies/show.html.erb within layouts/application (Duration: 0.9ms | Allocations: 328)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 6.8ms | Allocations: 3949)
Completed 200 OK in 15ms (Views: 8.4ms | ActiveRecord: 1.9ms | Allocations: 6504)


Started GET "/companies/1" for 127.0.0.1 at 2021-10-31 22:16:16 +0530
Processing by CompaniesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/companies_controller.rb:21:in `show'
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."lft" >= 1 AND "companies"."lft" < 2 ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:55:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/show.html.erb within layouts/application
  Rendered companies/show.html.erb within layouts/application (Duration: 0.6ms | Allocations: 328)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 5.1ms | Allocations: 3949)
Completed 200 OK in 15ms (Views: 8.5ms | ActiveRecord: 1.7ms | Allocations: 6503)


Started GET "/companies" for 127.0.0.1 at 2021-10-31 22:16:19 +0530
Processing by CompaniesController#index as HTML
  [1m[36mCompany Load (2.7ms)[0m  [1m[34mSELECT "companies".* FROM "companies" ORDER BY "companies"."lft" ASC[0m
  ↳ app/controllers/companies_controller.rb:55:in `build_hash_tree'
  Rendering layout layouts/application.html.erb
  Rendering companies/index.html.erb within layouts/application
  Rendered companies/index.html.erb within layouts/application (Duration: 1.8ms | Allocations: 227)
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 7.9ms | Allocations: 3663)
Completed 200 OK in 21ms (Views: 8.6ms | ActiveRecord: 2.7ms | Allocations: 4944)


